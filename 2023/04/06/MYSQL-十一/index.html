<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>MYSQL(十一) | jinux</title>
  <meta name="description" content="前端 学习 javascript">
  <meta name="keywords" content>
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="alternate" href="/atom.xml" title="jinux">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="mysql学习笔记整理-索引优化">
<meta name="keywords" content="MYSQL笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="MYSQL(十一)">
<meta property="og:url" content="/2023/04/06/MYSQL-十一/index.html">
<meta property="og:site_name" content="jinux">
<meta property="og:description" content="mysql学习笔记整理-索引优化">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/1.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/2.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/3.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/4.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/5.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/6.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/7.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/8.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/9.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/10.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/11.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/12.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/13.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/14.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/15.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/16.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/17.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/18.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/19.png">
<meta property="og:image" content="/2023/04/06/MYSQL-十一/20.png">
<meta property="og:updated_time" content="2024-01-11T07:00:59.135Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MYSQL(十一)">
<meta name="twitter:description" content="mysql学习笔记整理-索引优化">
<meta name="twitter:image" content="/2023/04/06/MYSQL-十一/1.png">

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>
</html>
<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script>
  <header class="l_header">
	<div class='wrapper'>
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href='/' >
				<!-- <i class="fa fa-home"></i> -->
				jinux
			</a>

				<div class='menu'>
					<ul class='h-list'>
						
							<li>
								<a class='flat-box nav-home' href='/'>
									<i class="fa fa-home"></i>
									主页
								</a>
							</li>
						
							<li>
								<a class='flat-box nav-cube' href='/categories'>
									<i class="fa fa-cube"></i>
									导航
								</a>
							</li>
						
							<li>
								<a class='flat-box nav-github' href='https://github.com/jinux7'>
									<i class="fa fa-github"></i>
									github
								</a>
							</li>
						
							<li>
								<a class='flat-box nav-archive' href='/archives'>
									<i class="fa fa-archive"></i>
									归档
								</a>
							</li>
						
					</ul>
					<div class='underline'></div>
				</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search" />
						<span class="icon"><i class="fa fa-search"></i></span>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a href='javascript:void(0)'><i class="fa fa-search flat-box"></i></span></a></li>
				
				<li class='s-menu'><a href='javascript:void(0)'><i class="fa fa-navicon flat-box"></i></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo" class="flat-box" href='javascript:void(0)'>
				xaoxuu
			</a>

			<ul class='switcher h-list'>
				<li class='s-comment'><a href='javascript:void(0)'><i class="fa fa-comments flat-box"></i></a></li>
				<li class='s-top'><a href='javascript:void(0)'><i class="fa fa-arrow-up flat-box"></i></a></li>
				<li class='s-toc'><a href='javascript:void(0)'><i class="fa fa-list-ul flat-box"></i></a></li>
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
        <div class="header">jinux</div>
		<nav>
			
				<a href="/" class="nav-home nav">
					<i class="fa fa-home"></i>
					主页
				</a>
			
				<a href="/categories" class="nav-cube nav">
					<i class="fa fa-cube"></i>
					导航
				</a>
			
				<a href="https://github.com/jinux7" class="nav-github nav">
					<i class="fa fa-github"></i>
					github
				</a>
			
				<a href="/archives" class="nav-archive nav">
					<i class="fa fa-archive"></i>
					归档
				</a>
			
		</nav>
	</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-MYSQL-十一" class="post white-box article-type-post" itemscope itemprop="blogPost">
    <section class='meta'>
        <h1 class="title">
            
                MYSQL(十一)
            
        </h1>
        <time>
            2023-04-06 Thursday&nbsp;&nbsp;
            <i class="fa fa-eye" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
        </time>
        
    
    <div class='cats'>
        <a href="/categories/服务器/">服务器</a>
    </div>


    </section>
    
        <section class="toc-wrapper">
            <div class="header"><i class="fa fa-list" aria-hidden="true"></i>&nbsp;&nbsp;目录</div>
            <div class='content'>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#索引优化"><span class="toc-number">1.</span> <span class="toc-text">索引优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基础知识"><span class="toc-number">1.1.</span> <span class="toc-text">基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#测试数据"><span class="toc-number">1.1.1.</span> <span class="toc-text">测试数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基础思路"><span class="toc-number">1.1.2.</span> <span class="toc-text">基础思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串"><span class="toc-number">1.1.3.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数值类型"><span class="toc-number">1.1.4.</span> <span class="toc-text">数值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EXPLAIN"><span class="toc-number">1.1.5.</span> <span class="toc-text">EXPLAIN</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#索引基础"><span class="toc-number">1.2.</span> <span class="toc-text">索引基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#索引类型"><span class="toc-number">1.2.1.</span> <span class="toc-text">索引类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#索引维护"><span class="toc-number">1.2.2.</span> <span class="toc-text">索引维护</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#性能分析"><span class="toc-number">1.2.3.</span> <span class="toc-text">性能分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#普通字段"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">普通字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#索引字段"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">索引字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#多表操作"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">多表操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字段选择"><span class="toc-number">1.3.</span> <span class="toc-text">字段选择</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#维度思考"><span class="toc-number">1.3.1.</span> <span class="toc-text">维度思考</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#索引规则"><span class="toc-number">1.3.2.</span> <span class="toc-text">索引规则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前缀与组合"><span class="toc-number">1.4.</span> <span class="toc-text">前缀与组合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#前缀索引"><span class="toc-number">1.4.1.</span> <span class="toc-text">前缀索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#组合索引"><span class="toc-number">1.4.2.</span> <span class="toc-text">组合索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询优化"><span class="toc-number">1.5.</span> <span class="toc-text">查询优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#解析器"><span class="toc-number">1.5.1.</span> <span class="toc-text">解析器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表达式影响"><span class="toc-number">1.5.2.</span> <span class="toc-text">表达式影响</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#类型比较"><span class="toc-number">1.5.3.</span> <span class="toc-text">类型比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#排序"><span class="toc-number">1.5.4.</span> <span class="toc-text">排序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#慢查询"><span class="toc-number">1.6.</span> <span class="toc-text">慢查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#状态查看"><span class="toc-number">1.6.1.</span> <span class="toc-text">状态查看</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#运行配置"><span class="toc-number">1.6.2.</span> <span class="toc-text">运行配置</span></a></li></ol></li></ol></li></ol>
            </div>
        </section>
    

    <section class="article typo">

        <div class="article-entry" itemprop="articleBody">
            <p>mysql学习笔记整理-索引优化<br><a id="more"></a></p>
<h2 id="索引优化"><a href="#索引优化" class="headerlink" title="索引优化"></a>索引优化</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><p>合理设置索引会对数据库性能带来很大提升。</p>
<h4 id="测试数据"><a href="#测试数据" class="headerlink" title="测试数据"></a>测试数据</h4><p>为了演示索引需要添加些测试数据，下面是添加学生数据的储存过程代码。如果你已经有测试数据可以省掉这一步。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE add_stus(IN num int)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i int DEFAULT 0;</span><br><span class="line">DECLARE _birthday datetime;</span><br><span class="line">WHILE num&gt;i DO</span><br><span class="line">    SET _birthday  = date_sub(now(),INTERVAL floor(RAND()*1000) day);</span><br><span class="line">    INSERT INTO stu SET</span><br><span class="line">    sname = concat(left(md5(RAND()),5),&apos;后盾人向军&apos;),</span><br><span class="line">    class_id =1+FLOOR( RAND()*100000),</span><br><span class="line">    birthday = _birthday ,</span><br><span class="line">    sex = 1+FLOOR(RAND()*2 );</span><br><span class="line"></span><br><span class="line">    SET i= i+1;</span><br><span class="line">END WHILE;</span><br><span class="line">END</span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure></p>
<p>调用储存过程添加五十万条记录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">call add_stus(500000)</span><br></pre></td></tr></table></figure></p>
<h4 id="基础思路"><a href="#基础思路" class="headerlink" title="基础思路"></a>基础思路</h4><p>选择合理范围内最小的</p>
<p>我们应该选择最小的数据范围，因为这样可以大大减少磁盘空间及磁盘 I/0 读写开销，减少内存占用，减少 CPU 的占用率。</p>
<p>选择相对简单的数据类型</p>
<p>数字类型相对字符串类型要简单的多，尤其是在比较运算时，所以我们应该选择最简单的数据类型，比如说在保存时间时，因为 PHP 可以良好的处理 LINUX 时间戳所以我们可以将日期存为 int(10)要方便、合适、快速的多。</p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>字符串数据类型是一个万能数据类型，可以储存数值、字符串等。</p>
<p>保存数值类型最好不要用字符串数据类型，这样存储的空间显然是会更大，而且在排序时字符串的 9 是大于 22 的。如果进行运算时 mysql 会将字符串转换为数值类型，这种转换是不会走索引的。</p>
<p>如果明确数据在一个完整的集合中如男，女，那么可以使用 set 或 enum 数据类型，这种数据类型在运算及储存时以数值方式操作，所以效率要比字符串更好，同时空间占用更少。</p>
<h4 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h4><p><strong>整数</strong></p>
<p>整数类型很多比如 tinyint、int、smallint、bigint 等，那么我们要根据自己需要存储的数据长度决定使用的类型，同时 tinyint(10)与 tinyint(100)在储存与计算上并无任何差别，区别只是显示层面上，但是我们也要选择适合合适的数据类型长度。可以通过指定 zerofill 属性查看显示时区别。</p>
<p><strong>浮点数与精度数值</strong></p>
<p>浮点数 float 与 double 在储存空间及运行效率上要优于精度数值类型 decimal，但 float 与 double 会有舍入错误而 decimal 则可以提供更加准确的小数级精确运算不会有错误产生计算更精确，适用于金融类型数据的存储。</p>
<p><strong>总结</strong><br>数值数据类型要比字符串执行更快，范围区间小的数据类型占用空间更少，处理速度更快，如 tinyint 可比 bigint 要快的多。选择数据类型时要考虑内容长度，比如是保存毫米单位还是米而选择不同的数值类型。</p>
<h4 id="EXPLAIN"><a href="#EXPLAIN" class="headerlink" title="EXPLAIN"></a>EXPLAIN</h4><p>EXPLAIN 指令可以帮助开发人员分析 SQL 问题，explain 显示了 mysql 如何使用索引来处理 select 语句以及连接表，可以帮助选择更好的索引和写出更优化的查询语句。<br><strong>字段说明</strong></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>索引执行顺序</td>
<td></td>
</tr>
<tr>
<td>select_type</td>
<td>查询类型</td>
<td>simple:基本查询 <br> union result:union 的结果</td>
</tr>
<tr>
<td>table</td>
<td>操作表</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>使用类型</td>
<td>const: 前面表匹配唯一行检索速度快，如果使用主键值比较<br>ref: 前面表中的非唯一数据<br>eq_ref:前面表中非唯一数据，使用了唯一索引字段，如表关联时使用主键<br>range:索引区间获得，如使用 IN(1,2,3)筛选<br>all:全表遍历<br>index:与 all 类似只是扫描所有表，而非数据表</td>
</tr>
<tr>
<td>possible_keys</td>
<td>可能用到的索引，不一定被真正使用</td>
</tr>
<tr>
<td>key</td>
<td>最终使用的索引</td>
<td></td>
</tr>
<tr>
<td>key_len</td>
<td>索引字节数</td>
<td></td>
</tr>
<tr>
<td>ref</td>
<td>列与索引的比较</td>
<td>const 为常量比较</td>
</tr>
<tr>
<td>rows</td>
<td>预计读出的记录条数</td>
<td></td>
</tr>
<tr>
<td>Extra</td>
<td>查询说明</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>使用没有添加索引的 birthday 字段会进行全表扫描<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where birthday = &apos;19900231&apos;;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/1.png" alt="img"><br>使用索引表排序所以 type 为 index<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu order by id ;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/2.png" alt="img"><br>使用主键查询会使用 const 类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where id = 3;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/3.png" alt="img"><br>使用 IN 查询后使用了区间 range 索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where class_id in(1,2,3);</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/4.png" alt="img"><br>下面是多表关联使用索引的情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu s inner join class c on s.class_id = c.id where sname = &apos;后盾人&apos;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/5.png" alt="img"></p>
<h3 id="索引基础"><a href="#索引基础" class="headerlink" title="索引基础"></a>索引基础</h3><p>索引就像一本书的目录一样，我们可以通过一本书的目录，快速的找到需要的页面，但是我们也不能过多的创建目录页（索引），原因是如果某一篇文章删除或修改将发变所有页码的顺序，就需要重新创建目录。<br><code>select sname from stu where sname=&quot;后盾人&quot;</code> 如果 <code>sname</code> 使用了索引，上面这个例子就会使用到 <code>sname</code> 索引<br><strong>索引弊端</strong></p>
<ul>
<li>创建索引会使查询操作变得更加快速，但是会降低增加、删除、更新操作的速度，因为执行这些操作的同时会对索引文件进行重新排序或更新</li>
<li>创建过多列的索引会大大增加磁盘空间开销</li>
<li>不要盲目的创建索引，只为查询操作频繁的列创建索引</li>
</ul>
<h4 id="索引类型"><a href="#索引类型" class="headerlink" title="索引类型"></a>索引类型</h4><table>
<thead>
<tr>
<th>索引</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>UNIQUE 唯一索引</td>
<td>不可以出现相同的值，可以有 NULL 值</td>
</tr>
<tr>
<td>INDEX 普通索引</td>
<td>允许出现相同的索引内容</td>
</tr>
<tr>
<td>PRIMARY KEY 主键索引</td>
<td>不允许出现相同的值，且不能为 NULL 值</td>
</tr>
</tbody>
</table>
<h4 id="索引维护"><a href="#索引维护" class="headerlink" title="索引维护"></a>索引维护</h4><p>为 stu 学生表的 sname 字段设置索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu ADD INDEX sname_index(sname)</span><br></pre></td></tr></table></figure></p>
<p>删除索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu DROP INDEX sname_index</span><br></pre></td></tr></table></figure></p>
<p>删除主键索引，首先需要移除 auto_increment 然后删除主键索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY id int;</span><br><span class="line">ALTER TABLE stu DROP PRIMARY KEY</span><br></pre></td></tr></table></figure></p>
<p>查看表索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show index from stu;</span><br></pre></td></tr></table></figure></p>
<h4 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h4><p>索引是加快查询操作的重要手段，如果当发生查询过慢时添加上索引后会发现速度大大改观</p>
<h5 id="普通字段"><a href="#普通字段" class="headerlink" title="普通字段"></a>普通字段</h5><p>当没有地表 class_id 字段添加索引时，查找 cid 为 3 的记录会执行全表扫描，性能是最差的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM stu WHERE class_id =5 LIMIT 1;</span><br></pre></td></tr></table></figure></p>
<p>通过结果的 type=ALL 可以看到执行了全表扫描，遍历了一百万条记录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">id            | 1</span><br><span class="line">select_type   | SIMPLE</span><br><span class="line">table         | stu</span><br><span class="line">partitions    | &lt;null&gt;</span><br><span class="line">type          | ALL</span><br><span class="line">possible_keys | &lt;null&gt;</span><br><span class="line">key           | &lt;null&gt;</span><br><span class="line">key_len       | &lt;null&gt;</span><br><span class="line">ref           | &lt;null&gt;</span><br><span class="line">rows          | 1000000</span><br><span class="line">filtered      | 10.0</span><br><span class="line">Extra         | Using where</span><br></pre></td></tr></table></figure></p>
<h5 id="索引字段"><a href="#索引字段" class="headerlink" title="索引字段"></a>索引字段</h5><p>下面来为 class_id 添加索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu ADD INDEX class_id(class_id);</span><br></pre></td></tr></table></figure></p>
<p>再次执行查询来看添加索引后的效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM stu WHERE class_id =5 LIMIT 1;</span><br></pre></td></tr></table></figure></p>
<p>通过查看 type 字段看到已经走了索引，本次查询遍历了 16 条记录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">id            | 1</span><br><span class="line">select_type   | SIMPLE</span><br><span class="line">table         | stu</span><br><span class="line">partitions    | &lt;null&gt;</span><br><span class="line">type          | ref</span><br><span class="line">possible_keys | class_id</span><br><span class="line">key           | class_id</span><br><span class="line">key_len       | 5</span><br><span class="line">ref           | const</span><br><span class="line">rows          | 16</span><br><span class="line">filtered      | 100.0</span><br><span class="line">Extra         | &lt;null&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="多表操作"><a href="#多表操作" class="headerlink" title="多表操作"></a>多表操作</h5><p>在使用连接操作多个表时，如果没有添加索引性能会非常差。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from a join b on a.id=b.id join c on b.id=c.id</span><br></pre></td></tr></table></figure></p>
<p>结果中会看到每张表都遍历了所有记录<br><img src="/2023/04/06/MYSQL-十一/6.png" alt="img"><br>下面来添加索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE a ADD INDEX id(id);</span><br><span class="line">ALTER TABLE b ADD INDEX id(id);</span><br><span class="line">ALTER TABLE c ADD INDEX id(id);</span><br></pre></td></tr></table></figure></p>
<p>执行的结果会看到使用了索引，并且并没有进行全表遍历<br><img src="/2023/04/06/MYSQL-十一/7.png" alt="img"></p>
<h3 id="字段选择"><a href="#字段选择" class="headerlink" title="字段选择"></a>字段选择</h3><h4 id="维度思考"><a href="#维度思考" class="headerlink" title="维度思考"></a>维度思考</h4><ul>
<li>数据列中不重复值出现的个数，维度的最大值是数据行的数量</li>
<li>如数据表中存在 8 行数据 a ,b ,c,d,a,b,c,d 这个表的维度为 4</li>
<li>要为维度高的列创建索引</li>
<li>性别这样的列不适合创建索引，因为维度过低</li>
</ul>
<h4 id="索引规则"><a href="#索引规则" class="headerlink" title="索引规则"></a>索引规则</h4><ul>
<li>对 where，on 或 group by 及 order by 中出现的列使用索引</li>
<li>对较小的数据列使用索引，这样会使索引文件更小，同时内存中也可以装载更多的索引键</li>
<li>为较长的字符串使用前缀索引</li>
<li>不要过多创建索引，除了增加额外的磁盘空间外，对于 DML 操作的速度影响很大</li>
</ul>
<h3 id="前缀与组合"><a href="#前缀与组合" class="headerlink" title="前缀与组合"></a>前缀与组合</h3><h4 id="前缀索引"><a href="#前缀索引" class="headerlink" title="前缀索引"></a>前缀索引</h4><p>大使用 text/长 varchar 字段时创建索引，会造成索引列长度过长，从而生成过大的索引文件影响检索性能。使用前缀索引方式进行索引，可以有效解决这个问题。前缀索引应该控制在一个合适的点，控制在 0.31 黄金值即可。</p>
<p>下面是取前缀索引的计算公式，有时也根据字段保存内容确定，比如标题 100 可以取 30 个字符为索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(distinct(left(title,10)))/count(*) from news</span><br></pre></td></tr></table></figure></p>
<p>下面为文章表 article 的 title 字段添加 30 个长度的前缀索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE article ADD INDEX title(title(30));</span><br></pre></td></tr></table></figure></p>
<h4 id="组合索引"><a href="#组合索引" class="headerlink" title="组合索引"></a>组合索引</h4><p>组合索引为是多个字段统一设计索引</p>
<ul>
<li>可以较为每个字段设置索引文件体积更小</li>
<li>使用速度优于多个索引操作</li>
<li>前面字段没出现，只出现后面字段时不走索引</li>
</ul>
<p>下面为学生表中的班级字段 class_id 与学生状态 status 设置组合索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Alter table stu add index class_id_status(class_id,status);</span><br></pre></td></tr></table></figure></p>
<p>使用 class_id 时会走索引，因为 class_id 在组合索引最前面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where class_id =3;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/8.png" alt="img"><br>只使用 status 字段不会走索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where status =1</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/9.png" alt="img"><br>当 class_id 与 status 字段一起使用时会走索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where status =1 and class_id=5;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/10.png" alt="img"></p>
<h3 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h3><h4 id="解析器"><a href="#解析器" class="headerlink" title="解析器"></a>解析器</h4><p>Mysql 的解析器非常智能，会对发出的每条 SQL 进行分析，决定是否使用索引或是否进行全表扫描。</p>
<p>下面发送的 SQL 解析器分析后已经清楚不会有任何语句符合操作，所以不会操作任何表或索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from houdunwang where false</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/11.png" alt="img"></p>
<h4 id="表达式影响"><a href="#表达式影响" class="headerlink" title="表达式影响"></a>表达式影响</h4><p>下面 SQL 语句不会使用索引，因为所有索引列参与了计算<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where status+1=1;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/12.png" alt="img"><br>下面 SQL 不会使用索引，因为使用了函数运算，原理与上面相同<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where left(sname,1)=&apos;后盾人&apos;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/13.png" alt="img"><br>下面 SQL 不会使用索引，因为索引列是模糊匹配的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where sname like &apos;%向军大叔%&apos;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/14.png" alt="img"><br>下面 SQL 会使用索引，因为不是模糊匹配<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where sname like &apos;后盾人%&apos;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/15.png" alt="img"><br>正则表达式也不会使用索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where sname regexp &apos;^后盾人&apos;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/16.png" alt="img"></p>
<h4 id="类型比较"><a href="#类型比较" class="headerlink" title="类型比较"></a>类型比较</h4><p>相同类型比较时走索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where sname=&quot;1&quot;;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/17.png" alt="img"><br>字符串类型使用数值时不走索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from stu where sname=1;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/18.png" alt="img"></p>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><p>排序中尽量使用添加索引的列进行<br>下例使用数据表进行排序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select id from stu order by birthday</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/19.png" alt="img"><br>排序字段为索引列后使用索引表排序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select id from stu order by id ;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2023/04/06/MYSQL-十一/20.png" alt="img"></p>
<h3 id="慢查询"><a href="#慢查询" class="headerlink" title="慢查询"></a>慢查询</h3><p>当 Mysql 性能下降时，通过开启慢查询来获得哪条 SQL 语句造成的响应过慢进行分析处理。当然开启慢查询会带来 CPU 损耗与日志记录的 IO 开销，所以我们要间断性的打开慢查询日志来查看 Mysql 运行状态。</p>
<p>慢查询能记录下所有执行超过 long_query_time 时间的 SQL 语句, 用于找到执行慢的 SQL, 方便我们对这些 SQL 进行优化。</p>
<h4 id="状态查看"><a href="#状态查看" class="headerlink" title="状态查看"></a>状态查看</h4><p>查看开启慢查询状态<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">show variables like &apos;slow_query%&apos;;</span><br><span class="line"></span><br><span class="line">+---------------------+-----------------------------------+</span><br><span class="line">| Variable_name       | Value                             |</span><br><span class="line">+---------------------+-----------------------------------+</span><br><span class="line">| slow_query_log      | OFF                               |</span><br><span class="line">| slow_query_log_file | /var/lib/mysql/homestead-slow.log |</span><br><span class="line">+---------------------+-----------------------------------+</span><br></pre></td></tr></table></figure></p>
<p>查看慢查询设置的时间<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;long_query_time&quot;</span><br><span class="line"></span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+-----------------+-----------+</span><br></pre></td></tr></table></figure></p>
<h4 id="运行配置"><a href="#运行配置" class="headerlink" title="运行配置"></a>运行配置</h4><p><strong>会话配置</strong></p>
<p>通过以下指令开启全局慢查询（如果重起 Mysql 后需要重新执行）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global slow_query_log=&apos;ON&apos;;</span><br></pre></td></tr></table></figure></p>
<p>设置慢查询时间为 1 秒，即超过 1 秒将会被记录到慢查询日志<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set session long_query_time=1;</span><br></pre></td></tr></table></figure></p>
<p><strong>全局配置</strong><br>通过修改配置 mysql 配置文件 my.cnf 来开启全局慢查询配置，在配置文件中修改以下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">slow_query_log = ON</span><br><span class="line">slow_query_log_file = /usr/local/mysql/data/slow.log</span><br><span class="line">long_query_time = 1</span><br></pre></td></tr></table></figure></p>
<p>重起 MYSQL 服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure></p>

        </div>

        
            <div class="article-tags tags">
                
                    <a href="/tags/MYSQL笔记/"><i class="fa fa-tag"></i>&nbsp;&nbsp;MYSQL笔记</a>
                
            </div>
        

        
            <div class="art-item-footer">
                
                    <span class="art-item-left">
                        <i class="fa fa-chevron-left" aria-hidden="true"></i>&nbsp;
                        <a href="/2023/04/06/MYSQL-十二/" rel="prev" title="MYSQL(十二)">
                            MYSQL(十二)
                        </a>
                    </span>
                
                
                    <span class="art-item-right">
                        <a href="/2023/04/06/MYSQL-十/" rel="next" title="MYSQL(十)">
                            MYSQL(十)
                        </a>&nbsp;
                        <i class="fa fa-chevron-right" aria-hidden="true"></i>
                    </span>
                
            </div>
        

    </section>

</article>

<br>

<!-- 显示推荐文章和评论 -->


<script>
    window.subData = {
        title: 'MYSQL(十一)',
        tools: true
    }
</script>


      </div>
      <aside class='l_side'>
        
  <section class='m_widget about'>
    
        <img class='avatar waves-image' src='https://avatars2.githubusercontent.com/u/20313228?s=400&u=81b6a332e9a0f8c63e4841766106f3c8f881cfb5&v=4' />
    
</section>


  <section class='m_widget categories'>
<div class='header'><i class="fa fa-sitemap" aria-hidden="true"></i>&nbsp;&nbsp;分类</div>
<div class='content'>
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/css/"><div class='name'>css</div><div class='badge'>11</div></a></li>
    
        <li><a class="flat-box" href="/categories/javascript/"><div class='name'>javascript</div><div class='badge'>171</div></a></li>
    
        <li><a class="flat-box" href="/categories/nodejs/"><div class='name'>nodejs</div><div class='badge'>19</div></a></li>
    
        <li><a class="flat-box" href="/categories/服务器/"><div class='name'>服务器</div><div class='badge'>14</div></a></li>
    
        <li><a class="flat-box" href="/categories/计算机原理/"><div class='name'>计算机原理</div><div class='badge'>15</div></a></li>
    
    </ul>
    
</div>
</section>


  
<div class="m_widget tagcloud">
    <div class="header"><i class="fa fa-tags" aria-hidden="true"></i>&nbsp;&nbsp;标签</div>
    <div class='content'>
        <a href="/tags/3D/" style="font-size: 14.77px; color: #949494">3D</a> <a href="/tags/AI/" style="font-size: 14px; color: #999">AI</a> <a href="/tags/MYSQL笔记/" style="font-size: 20.15px; color: #6f6f6f">MYSQL笔记</a> <a href="/tags/ajax/" style="font-size: 17.85px; color: #7f7f7f">ajax</a> <a href="/tags/canvas/" style="font-size: 14px; color: #999">canvas</a> <a href="/tags/cordova/" style="font-size: 14px; color: #999">cordova</a> <a href="/tags/docker/" style="font-size: 14px; color: #999">docker</a> <a href="/tags/github/" style="font-size: 17.85px; color: #7f7f7f">github</a> <a href="/tags/hexo/" style="font-size: 14px; color: #999">hexo</a> <a href="/tags/html/" style="font-size: 16.31px; color: #898989">html</a> <a href="/tags/jquery/" style="font-size: 15.54px; color: #8f8f8f">jquery</a> <a href="/tags/linux/" style="font-size: 14.77px; color: #949494">linux</a> <a href="/tags/nodejs/" style="font-size: 15.54px; color: #8f8f8f">nodejs</a> <a href="/tags/threejs/" style="font-size: 14px; color: #999">threejs</a> <a href="/tags/typescript/" style="font-size: 14px; color: #999">typescript</a> <a href="/tags/vue/" style="font-size: 20.92px; color: #6a6a6a">vue</a> <a href="/tags/webSocket/" style="font-size: 14px; color: #999">webSocket</a> <a href="/tags/webpack/" style="font-size: 17.85px; color: #7f7f7f">webpack</a> <a href="/tags/web图形/" style="font-size: 17.08px; color: #848484">web图形</a> <a href="/tags/web安全/" style="font-size: 17.85px; color: #7f7f7f">web安全</a> <a href="/tags/web性能/" style="font-size: 18.62px; color: #7a7a7a">web性能</a> <a href="/tags/worker/" style="font-size: 14.77px; color: #949494">worker</a> <a href="/tags/兼容性/" style="font-size: 15.54px; color: #8f8f8f">兼容性</a> <a href="/tags/后端/" style="font-size: 14.77px; color: #949494">后端</a> <a href="/tags/后端代理服务/" style="font-size: 14px; color: #999">后端代理服务</a> <a href="/tags/图片处理/" style="font-size: 17.85px; color: #7f7f7f">图片处理</a> <a href="/tags/基础知识/" style="font-size: 24px; color: #555">基础知识</a> <a href="/tags/少儿编程/" style="font-size: 14px; color: #999">少儿编程</a> <a href="/tags/工具库/" style="font-size: 23.23px; color: #5a5a5a">工具库</a> <a href="/tags/微信/" style="font-size: 14.77px; color: #949494">微信</a> <a href="/tags/手写/" style="font-size: 19.38px; color: #747474">手写</a> <a href="/tags/文章收集/" style="font-size: 14px; color: #999">文章收集</a> <a href="/tags/样式/" style="font-size: 17.85px; color: #7f7f7f">样式</a> <a href="/tags/正则/" style="font-size: 14px; color: #999">正则</a> <a href="/tags/浏览器/" style="font-size: 16.31px; color: #898989">浏览器</a> <a href="/tags/爬虫/" style="font-size: 14px; color: #999">爬虫</a> <a href="/tags/移动端/" style="font-size: 21.69px; color: #656565">移动端</a> <a href="/tags/算法/" style="font-size: 15.54px; color: #8f8f8f">算法</a> <a href="/tags/编译/" style="font-size: 17.08px; color: #848484">编译</a> <a href="/tags/网络基础/" style="font-size: 20.15px; color: #6f6f6f">网络基础</a> <a href="/tags/调试/" style="font-size: 14.77px; color: #949494">调试</a> <a href="/tags/资源导航/" style="font-size: 14px; color: #999">资源导航</a> <a href="/tags/软考/" style="font-size: 14px; color: #999">软考</a> <a href="/tags/面试题/" style="font-size: 22.46px; color: #5f5f5f">面试题</a> <a href="/tags/面试题系列/" style="font-size: 17.85px; color: #7f7f7f">面试题系列</a>
    </div>
</div>




      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">
    <div class="social-wrapper">
      
    </div>
    <br>
    <div>博客内容遵循 <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="licenses">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></div>
    <div>本站使用 <a href="https://github.com/xaoxuu/hexo-theme-material-x" target="_blank" class="codename">Material-X</a> 作为主题，
		总访问量为 <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span> 次。
    </div>

</footer>

  <script>setLoadingBarProgress(80);</script>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src='//cdn.bootcss.com/node-waves/0.7.5/waves.min.js'></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<!-- 访问统计 -->
<!-- <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- 推荐文章 -->
<!-- <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script> -->
<!-- <script src="//unpkg.com/valine/dist/Valine.min.js"></script> -->
<script src="/js/jquery.fitvids.js"></script>
<script>
var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
var ALGOLIA_API_KEY = "";
var ALGOLIA_APP_ID = "";
var ALGOLIA_INDEX_NAME = "";
var AZURE_SERVICE_NAME = "";
var AZURE_INDEX_NAME = "";
var AZURE_QUERY_KEY = "";
var BAIDU_API_ID = "";
var SEARCH_SERVICE = "hexo";
var ROOT = "/"||"/";
if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


    
    
    


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
