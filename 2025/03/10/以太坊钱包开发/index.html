<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>以太坊钱包开发 | jinux</title>
  <meta name="description" content="前端 学习 javascript">
  <meta name="keywords" content>
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="alternate" href="/atom.xml" title="jinux">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="使用vue开发以太坊钱包">
<meta name="keywords" content="WEB3">
<meta property="og:type" content="article">
<meta property="og:title" content="以太坊钱包开发">
<meta property="og:url" content="/2025/03/10/以太坊钱包开发/index.html">
<meta property="og:site_name" content="jinux">
<meta property="og:description" content="使用vue开发以太坊钱包">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://gitee.com/fcjun/image/raw/master/img/202301022004191.png">
<meta property="og:image" content="https://gitee.com/fcjun/image/raw/master/img/202301022022983.png">
<meta property="og:image" content="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE4ff7e6f4bea9bf9f9da2e73a6f445493?ynotemdtimestamp=1670039920387">
<meta property="og:image" content="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE6fa3540c0b9ba25155d7623334aa6f65?ynotemdtimestamp=1670039920387">
<meta property="og:image" content="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE5b903d967930a3608c68015ee659c790?ynotemdtimestamp=1670039920387">
<meta property="og:image" content="https://gitee.com/fcjun/image/raw/master/img/202301022153807.png">
<meta property="og:image" content="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE5c5831294cda6ac00753bd5c0f1130f2?ynotemdtimestamp=1670039920387">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/22208307/1668518245248-4c524198-7a6a-482e-802c-d36d31220b06.png">
<meta property="og:image" content="https://gitee.com/fcjun/image/raw/master/img/image-20221208222354836.png">
<meta property="og:image" content="https://gitee.com/fcjun/image/raw/master/img/image-20221209110335777.png">
<meta property="og:image" content="https://gitee.com/fcjun/image/raw/master/img/202301022022983.png">
<meta property="og:updated_time" content="2025-03-11T02:03:02.316Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="以太坊钱包开发">
<meta name="twitter:description" content="使用vue开发以太坊钱包">
<meta name="twitter:image" content="https://gitee.com/fcjun/image/raw/master/img/202301022004191.png">

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>
</html>
<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script>
  <header class="l_header">
	<div class='wrapper'>
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href='/' >
				<!-- <i class="fa fa-home"></i> -->
				jinux
			</a>

				<div class='menu'>
					<ul class='h-list'>
						
							<li>
								<a class='flat-box nav-home' href='/'>
									<i class="fa fa-home"></i>
									主页
								</a>
							</li>
						
							<li>
								<a class='flat-box nav-cube' href='/categories'>
									<i class="fa fa-cube"></i>
									导航
								</a>
							</li>
						
							<li>
								<a class='flat-box nav-github' href='https://github.com/jinux7'>
									<i class="fa fa-github"></i>
									github
								</a>
							</li>
						
							<li>
								<a class='flat-box nav-archive' href='/archives'>
									<i class="fa fa-archive"></i>
									归档
								</a>
							</li>
						
					</ul>
					<div class='underline'></div>
				</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search" />
						<span class="icon"><i class="fa fa-search"></i></span>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a href='javascript:void(0)'><i class="fa fa-search flat-box"></i></span></a></li>
				
				<li class='s-menu'><a href='javascript:void(0)'><i class="fa fa-navicon flat-box"></i></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo" class="flat-box" href='javascript:void(0)'>
				xaoxuu
			</a>

			<ul class='switcher h-list'>
				<li class='s-comment'><a href='javascript:void(0)'><i class="fa fa-comments flat-box"></i></a></li>
				<li class='s-top'><a href='javascript:void(0)'><i class="fa fa-arrow-up flat-box"></i></a></li>
				<li class='s-toc'><a href='javascript:void(0)'><i class="fa fa-list-ul flat-box"></i></a></li>
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
        <div class="header">jinux</div>
		<nav>
			
				<a href="/" class="nav-home nav">
					<i class="fa fa-home"></i>
					主页
				</a>
			
				<a href="/categories" class="nav-cube nav">
					<i class="fa fa-cube"></i>
					导航
				</a>
			
				<a href="https://github.com/jinux7" class="nav-github nav">
					<i class="fa fa-github"></i>
					github
				</a>
			
				<a href="/archives" class="nav-archive nav">
					<i class="fa fa-archive"></i>
					归档
				</a>
			
		</nav>
	</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-以太坊钱包开发" class="post white-box article-type-post" itemscope itemprop="blogPost">
    <section class='meta'>
        <h1 class="title">
            
                以太坊钱包开发
            
        </h1>
        <time>
            2025-03-10 Monday&nbsp;&nbsp;
            <i class="fa fa-eye" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
        </time>
        
    
    <div class='cats'>
        <a href="/categories/javascript/">javascript</a>
    </div>


    </section>
    
        <section class="toc-wrapper">
            <div class="header"><i class="fa fa-list" aria-hidden="true"></i>&nbsp;&nbsp;目录</div>
            <div class='content'>
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#准备工作"><span class="toc-number">1.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#项目创建"><span class="toc-number">1.1.</span> <span class="toc-text">项目创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第三方包安装"><span class="toc-number">1.2.</span> <span class="toc-text">第三方包安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web3相关第三方包"><span class="toc-number">1.2.1.</span> <span class="toc-text">web3相关第三方包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node-polyfill-兼容文件配置"><span class="toc-number">1.2.2.</span> <span class="toc-text">node-polyfill 兼容文件配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置vant-ui-ui组件库"><span class="toc-number">1.2.3.</span> <span class="toc-text">配置vant-ui ui组件库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#通过vw配置响应式"><span class="toc-number">1.2.4.</span> <span class="toc-text">通过vw配置响应式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#web3连接到以太坊网络（测试网、主网）"><span class="toc-number">2.</span> <span class="toc-text">web3连接到以太坊网络（测试网、主网）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Web3js-高频-Api"><span class="toc-number">3.</span> <span class="toc-text">Web3js 高频 Api</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#账号创建"><span class="toc-number">3.1.</span> <span class="toc-text">账号创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#余额获取"><span class="toc-number">3.2.</span> <span class="toc-text">余额获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单位转换"><span class="toc-number">3.3.</span> <span class="toc-text">单位转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Eth转账"><span class="toc-number">3.4.</span> <span class="toc-text">Eth转账</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#账户系统"><span class="toc-number">4.</span> <span class="toc-text">账户系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#简介"><span class="toc-number">4.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#密码、私钥、keystore与助记词的关系"><span class="toc-number">4.2.</span> <span class="toc-text">密码、私钥、keystore与助记词的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#钱包的核心：私钥"><span class="toc-number">4.3.</span> <span class="toc-text">钱包的核心：私钥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建账户"><span class="toc-number">4.4.</span> <span class="toc-text">创建账户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web3-直接创建账户"><span class="toc-number">4.4.1.</span> <span class="toc-text">web3 直接创建账户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#助记词-创建账户"><span class="toc-number">4.4.2.</span> <span class="toc-text">助记词 创建账户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-依赖库"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">1. 依赖库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-通过助记词创建账号"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">2. 通过助记词创建账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-由keypair-获取钱包地址和私钥"><span class="toc-number">4.4.2.3.</span> <span class="toc-text">3. 由keypair 获取钱包地址和私钥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#导出账户"><span class="toc-number">4.5.</span> <span class="toc-text">导出账户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#导入账户"><span class="toc-number">4.6.</span> <span class="toc-text">导入账户</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#区块链钱包项目流程"><span class="toc-number">5.</span> <span class="toc-text">区块链钱包项目流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-项目准备"><span class="toc-number">5.0.1.</span> <span class="toc-text">1.项目准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#web3相关第三方包-1"><span class="toc-number">5.0.1.1.</span> <span class="toc-text">web3相关第三方包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#node-polyfill-兼容文件配置-1"><span class="toc-number">5.0.1.2.</span> <span class="toc-text">node-polyfill 兼容文件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置vant-ui-ui组件库-1"><span class="toc-number">5.0.1.3.</span> <span class="toc-text">配置vant-ui ui组件库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过vw配置响应式-1"><span class="toc-number">5.0.1.4.</span> <span class="toc-text">通过vw配置响应式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#封装缓存函数"><span class="toc-number">5.0.1.5.</span> <span class="toc-text">封装缓存函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-vue-文件引入"><span class="toc-number">5.0.1.6.</span> <span class="toc-text">app.vue 文件引入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-通过Mnemonic助记词创建钱包"><span class="toc-number">5.0.2.</span> <span class="toc-text">2.通过Mnemonic助记词创建钱包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-显示余额"><span class="toc-number">5.0.3.</span> <span class="toc-text">3.显示余额</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-转账交易"><span class="toc-number">5.0.4.</span> <span class="toc-text">4.转账交易</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-导出账户信息"><span class="toc-number">5.0.5.</span> <span class="toc-text">5.导出账户信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-解锁账户信息"><span class="toc-number">5.0.6.</span> <span class="toc-text">6.解锁账户信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#智能合约"><span class="toc-number">6.</span> <span class="toc-text">智能合约</span></a></li></ol>
            </div>
        </section>
    

    <section class="article typo">

        <div class="article-entry" itemprop="articleBody">
            <p>使用vue开发以太坊钱包<br><a id="more"></a></p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h2><p>版本信息:</p>
<p>Node  16.14</p>
<p>安装vue-cli </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>
<p>验证vue-cli 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vue -V</span><br><span class="line">// 结果 出现vue版本号 安装成功</span><br><span class="line">@vue/cli 5.0.8</span><br></pre></td></tr></table></figure>
<p>通过vue-cli创建项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ vue create &lt;项目名称&gt;</span><br><span class="line">// 选择配置</span><br><span class="line">Vue CLI v5.0.8</span><br><span class="line">? Please pick a preset: </span><br><span class="line">  Default ([Vue 3] babel, eslint) </span><br><span class="line">  Default ([Vue 2] babel, eslint) </span><br><span class="line">❯ Manually select features  `选择该项`</span><br></pre></td></tr></table></figure>
<p>选择自定义配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">? Check the features needed <span class="keyword">for</span> your project: (Press &lt;space&gt; to select, &lt;a&gt; to </span><br><span class="line">toggle all, &lt;i&gt; to invert selection, and &lt;enter&gt; to proceed)</span><br><span class="line"> ◉ Babel `选择该项`</span><br><span class="line"> ◯ TypeScript</span><br><span class="line"> ◯ Progressive Web App (PWA) Support</span><br><span class="line"> ◉ Router `选择该项`</span><br><span class="line"> ◯ Vuex</span><br><span class="line">❯◉ CSS Pre-processors `选择该项`</span><br><span class="line"> ◯ Linter / Formatter</span><br><span class="line"> ◯ Unit Testing</span><br><span class="line"> ◯ E2E Testing</span><br></pre></td></tr></table></figure>
<p>选择vue版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Choose a version of Vue.js that you want to start the project with (Use arrow </span><br><span class="line">keys)</span><br><span class="line">❯ 3.x </span><br><span class="line">  2.x</span><br></pre></td></tr></table></figure>
<p>选择路由设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">? Use <span class="built_in">history</span> mode <span class="keyword">for</span> router? (Requires proper server setup <span class="keyword">for</span> index fallback </span><br><span class="line"><span class="keyword">in</span> production) (Y/n) y  `输入y或者n`</span><br></pre></td></tr></table></figure>
<p>选择预处理语言</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported </span><br><span class="line">by default): </span><br><span class="line">  Sass/SCSS (with dart-sass) </span><br><span class="line">❯ Less </span><br><span class="line">  Stylus</span><br></pre></td></tr></table></figure>
<p>选择配置文件存放目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Where <span class="keyword">do</span> you prefer placing config <span class="keyword">for</span> Babel, ESLint, etc.? </span><br><span class="line">❯ In dedicated config files </span><br><span class="line">  In package.json</span><br></pre></td></tr></table></figure>
<p>安装成功后 运行测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> 项目名称</span><br><span class="line">$ npm run serve</span><br></pre></td></tr></table></figure>
<p>成功界面 </p>
<p><img src="https://gitee.com/fcjun/image/raw/master/img/202301022004191.png" alt="image-20230102200435157"></p>
<h2 id="第三方包安装"><a href="#第三方包安装" class="headerlink" title="第三方包安装"></a>第三方包安装</h2><h3 id="web3相关第三方包"><a href="#web3相关第三方包" class="headerlink" title="web3相关第三方包"></a>web3相关第三方包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install web3 bip39 ethereumjs-tx@1.3.7 ethereumjs-util ethereumjs-wallet</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注： ethereumjs-tx 使用1.3.7 版本</p>
</blockquote>
<h3 id="node-polyfill-兼容文件配置"><a href="#node-polyfill-兼容文件配置" class="headerlink" title="node-polyfill 兼容文件配置"></a>node-polyfill 兼容文件配置</h3><ol>
<li><p>下载polyfill 插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-polyfill-webpack-plugin -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>在vue.config.js 文件中配置插件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">'@vue/cli-service'</span>)</span><br><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line">++ <span class="keyword">const</span> NodePolyfillWebpackPlugin = <span class="built_in">require</span>(<span class="string">"node-polyfill-webpack-plugin"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: <span class="literal">true</span>,</span><br><span class="line">++  configureWebpack: &#123;</span><br><span class="line">++    plugins: [</span><br><span class="line">++      <span class="keyword">new</span> NodePolyfillWebpackPlugin()</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="配置vant-ui-ui组件库"><a href="#配置vant-ui-ui组件库" class="headerlink" title="配置vant-ui ui组件库"></a>配置vant-ui ui组件库</h3><p><a href="https://vant-contrib.gitee.io/vant/#/zh-CN" target="_blank" rel="noopener">https://vant-contrib.gitee.io/vant/#/zh-CN</a></p>
<ol>
<li>安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i vant</span><br><span class="line">$ npm i unplugin-vue-components -D</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在vue.config.js 文件中配置插件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">"@vue/cli-service"</span>);</span><br><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line"><span class="keyword">const</span> NodePolyfillWebpackPlugin = <span class="built_in">require</span>(<span class="string">"node-polyfill-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// vant</span></span><br><span class="line">++ <span class="keyword">const</span> &#123; VantResolver &#125; = <span class="built_in">require</span>(<span class="string">'unplugin-vue-components/resolvers'</span>);</span><br><span class="line">++ <span class="keyword">const</span> ComponentsPlugin = <span class="built_in">require</span>(<span class="string">'unplugin-vue-components/webpack'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: <span class="literal">true</span>,</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> NodePolyfillWebpackPlugin(),</span><br><span class="line">++    ComponentsPlugin(&#123; <span class="attr">resolvers</span>: [VantResolver()]&#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>测试 在app.vue文件添加代码</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;van-button type=&quot;primary&quot;&gt;test&lt;/van-button&gt;</span><br><span class="line"> &lt;van-button type=&quot;success&quot;&gt;test&lt;/van-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/fcjun/image/raw/master/img/202301022022983.png" alt="image-20230102202255947"></p>
<h3 id="通过vw配置响应式"><a href="#通过vw配置响应式" class="headerlink" title="通过vw配置响应式"></a>通过vw配置响应式</h3><p><a href="https://www.cnblogs.com/hongrun/p/16130707.html" target="_blank" rel="noopener">https://www.cnblogs.com/hongrun/p/16130707.html</a></p>
<ol>
<li>安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在根目录下创建 名为 <code>postcss.config.js</code> 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    <span class="string">"postcss-px-to-viewport"</span>: &#123;</span><br><span class="line">      unitToConvert: <span class="string">"px"</span>, <span class="comment">// 要转化的单位</span></span><br><span class="line">      viewportWidth: <span class="number">375</span>, <span class="comment">// UI设计稿的宽度</span></span><br><span class="line">      unitPrecision: <span class="number">6</span>, <span class="comment">// 转换后的精度，即小数点位数</span></span><br><span class="line">      propList: [<span class="string">"*"</span>], <span class="comment">// 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span></span><br><span class="line">      viewportUnit: <span class="string">"vw"</span>, <span class="comment">// 指定需要转换成的视窗单位，默认vw</span></span><br><span class="line">      fontViewportUnit: <span class="string">"vw"</span>, <span class="comment">// 指定字体需要转换成的视窗单位，默认vw      selectorBlackList: ["wrap"], // 指定不转换为视窗单位的类名，</span></span><br><span class="line">      minPixelValue: <span class="number">1</span>, <span class="comment">// 默认值1，小于或等于1px则不进行转换</span></span><br><span class="line">      mediaQuery: <span class="literal">true</span>, <span class="comment">// 是否在媒体查询的css代码中也进行转换，默认false</span></span><br><span class="line">      replace: <span class="literal">true</span>, <span class="comment">// 是否转换后直接更换属性值</span></span><br><span class="line">      exclude: [<span class="regexp">/node_modules/</span>], <span class="comment">// 设置忽略文件，用正则做目录名匹配</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="web3连接到以太坊网络（测试网、主网）"><a href="#web3连接到以太坊网络（测试网、主网）" class="headerlink" title="web3连接到以太坊网络（测试网、主网）"></a>web3连接到以太坊网络（测试网、主网）</h1><ol>
<li>什么是web3<br>web3是以太坊官方开提供的一个连接以太坊区块链的模块，允许您使用HTTP或IPC与本地或远程以太坊节点进行交互，它包含以太坊生态系统的几乎所有功能。web3模块主要连接以太坊暴露出来的RPC层。开发者利用web3连接RPC层，可以连接任何暴露了RPC接口的节点，从而与区块链交互。web3是一个集合库，支持多种开发语言使用wbe3，其中的JavaScript API叫做web3.js、另外还有web3.py、web3j，web3.js将是我们钱包开发项目的重点。</li>
</ol>
<p>web3.eth：用于与以太坊区块链和智能合约之间的交互。</p>
<p>web3.utils：包含一些辅助方法。</p>
<p>web3.shh：用于协议进行通信的P2P和广播。</p>
<p>web3.bzz：用于与群网络交互的Bzz模块。</p>
<p>github地址：<a href="https://github.com/web3/web3.js/tree/v1.0.0-beta.34" target="_blank" rel="noopener">https://github.com/web3/web3.js/tree/v1.0.0-beta.34</a></p>
<p>web3.js开发文档：<a href="https://web3js.readthedocs.io/en/v1.8.1/" target="_blank" rel="noopener">https://web3js.readthedocs.io/en/v1.8.1/</a></p>
<p>web3.js 中文文档 : <a href="https://learnblockchain.cn/docs/web3.js/" target="_blank" rel="noopener">https://learnblockchain.cn/docs/web3.js/</a></p>
<ol start="2">
<li>实例化web3对象<br>web3要与以坊节点进行交互，需要创建一个web3对象，下面看看如何创建。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Web3 = <span class="built_in">require</span>(<span class="string">'web3'</span>);</span><br><span class="line"><span class="comment">// "Web3.providers.givenProvider" will be set if in an Ethereum supported browser.</span></span><br><span class="line"><span class="keyword">var</span> web3 = <span class="keyword">new</span> Web3(Web3.givenProvider || <span class="string">'ws://some.local-or-remote.node:8546'</span>);</span><br></pre></td></tr></table></figure>
<p>根据API可知需要指定节点地址，我们将ws://some.local-or-remote.node:8546换成其它连接到以太坊网络的节点的地址，以此来确定连接的以太坊的网络。那么连接到以太坊网络的节点的地址是多少呢？这里我们需要使用到infura。</p>
<ol start="3">
<li>获取连接到以太坊网络的节点地址<br>infura提供公开的 Ethereum主网和测试网络节点，到infura.io网站注册后即可获取各个网络的地址。请按照如下步骤获取地址。</li>
</ol>
<p>第一步：打开 infura网站地址：<a href="https://infura.io/dashboard，使用邮箱注册后登陆" target="_blank" rel="noopener">https://infura.io/dashboard，使用邮箱注册后登陆</a></p>
<p>第二步：点击上图标记的“create new project”按钮创建一个新项目。然后弹出如下弹框，在输入框输入项目名，如”MyEtherWallet“，然后点击“create project”按钮创建。</p>
<p><img src="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE4ff7e6f4bea9bf9f9da2e73a6f445493?ynotemdtimestamp=1670039920387" alt></p>
<p>第三步：然后会显示如下界面，点击下图中的选择框，可以看到提供主网、Kovan测试网络、Ropsten测试网络、GoerLi测试网络的节点地址。</p>
<p><img src="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE6fa3540c0b9ba25155d7623334aa6f65?ynotemdtimestamp=1670039920387" alt="image.png"></p>
<p>第四步：选择GoerLi测试网络，然后复制地址，将获取到类似这样的地址：<a href="https://kovan.infura.io/v3/d93f......cd67，如下。" target="_blank" rel="noopener">https://kovan.infura.io/v3/d93f......cd67，如下。</a></p>
<p><img src="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE5b903d967930a3608c68015ee659c790?ynotemdtimestamp=1670039920387" alt="image.png"></p>
<ol start="4">
<li>连接到以太坊GoerLi测试网络<br>现在将复制的地址替换掉实例化web对象的地址，如下</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Web3 = <span class="built_in">require</span>(<span class="string">"web3"</span>)</span><br><span class="line"><span class="keyword">var</span> web3 = <span class="keyword">new</span> Web3(Web3.givenProvider || <span class="string">'wss://goerli.infura.io/ws/v3/cb7e63cf28244e4499b4b6fb6162e746'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Web3:"</span>, web3)</span><br></pre></td></tr></table></figure>
<p>连接到以太坊主网与GoerLi测试网络一样的，只需复制主网节点的地址去实例化web3即可。由于在主网上交易需要花费gas，因此我们基于GoerLi测试网络进行开发，后续开发完成后可再切换到主网。</p>
<p><img src="https://gitee.com/fcjun/image/raw/master/img/202301022153807.png" alt="image-20230102215334761"></p>
<h1 id="Web3js-高频-Api"><a href="#Web3js-高频-Api" class="headerlink" title="Web3js 高频 Api"></a>Web3js 高频 Api</h1><h2 id="账号创建"><a href="#账号创建" class="headerlink" title="账号创建"></a>账号创建</h2><ol>
<li>创建账号需要使用web3.js的如下API</li>
</ol>
<p>API</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.accounts.create([entropy]);</span><br></pre></td></tr></table></figure>
<p><img src="https://note.youdao.com/yws/public/resource/1ec02f1c3de5c9debaa6d4652bd7cb6d/WEBRESOURCE5c5831294cda6ac00753bd5c0f1130f2?ynotemdtimestamp=1670039920387" alt="image.png"><br>参数：</p>
<p>entropy - String (可选): 它是一个可选项，是一个随机字符串，将作为解锁账号的密码。如果没有传递字符串，则使用random生成随机字符串。</p>
<p>返回值：</p>
<p>Object：包含以下字段的一个帐户对象：</p>
<p>address- string：帐户地址。</p>
<p>privateKey- string：帐户私钥。前端永远不应该在localstorage中以未加密的方式共享或存储！</p>
<p>signTransaction(tx [, callback])- Function：签名交易的方法。</p>
<p>sign(data)- Function：签名二进制交易的方法。</p>
<p>例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.accounts.create(<span class="string">'2435@#@#@±±±±!!!!678543213456764321§34567543213456785432134567'</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.accounts.create(<span class="string">'2435@#@#@±±±±!!!!678543213456764321§34567543213456785432134567'</span>);</span><br><span class="line">&#123;</span><br><span class="line">address: <span class="string">"0xF2CD2AA0c7926743B1D4310b2BC984a0a453c3d4"</span>,</span><br><span class="line">privateKey: <span class="string">"0xd7325de5c2c1cf0009fac77d3d04a9c004b038883446b065871bc3e831dcd098"</span>,</span><br><span class="line">signTransaction: <span class="function"><span class="keyword">function</span>(<span class="params">tx</span>)</span>&#123;...&#125;,</span><br><span class="line">sign: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;...&#125;,</span><br><span class="line">encrypt: <span class="function"><span class="keyword">function</span>(<span class="params">password</span>)</span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>获取地址<br>使用API<code>web3.eth.accounts.create()</code>创建了新账户后生成了一个账户对象，在该对象中拥有<code>addreds</code>属性，即账户的私钥。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> account = web3.eth.accounts.create(<span class="string">"123456"</span>)</span><br><span class="line"><span class="keyword">let</span> address = account.address</span><br><span class="line"><span class="comment">//address：0xfF0B5A0AA68249cD161b606679DB49CBD9a12cd0</span></span><br></pre></td></tr></table></figure>
<p>3.获取私钥</p>
<p>使用API<code>web3.eth.accounts.create()</code>创建了新账户后生成了一个账户对象，在该对象中拥有<code>privateKey</code>属性，即账户的私钥。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> account = web3.eth.accounts.create()</span><br><span class="line"><span class="keyword">let</span> privateKey = account.privateKey</span><br><span class="line"><span class="comment">//privateKey:0x348ce564d427a3311b6536bbcff9390d69395b06ed6c486954e971d960fe8709</span></span><br></pre></td></tr></table></figure>
<h2 id="余额获取"><a href="#余额获取" class="headerlink" title="余额获取"></a>余额获取</h2><p>根据地址获取以wei为单位余额</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.getBalance(address).then(<span class="function">(<span class="params">ret</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="单位转换"><a href="#单位转换" class="headerlink" title="单位转换"></a>单位转换</h2><ol>
<li>Eth 转为 wei</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Web3 或者实例后的web3对象都可以</span><br><span class="line"><span class="keyword">const</span> num = Web3.utils.toWei(<span class="string">"0.3"</span>);</span><br><span class="line"><span class="keyword">const</span> num = web3.utils.toWei(<span class="string">"0.3"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(num)</span><br><span class="line"><span class="comment">// 300000000000000000</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>wei 转为Eth</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Web3 或者实例后的web3对象都可以</span><br><span class="line"> <span class="keyword">this</span>.balance = Web3.utils.fromWei(ret, <span class="string">"ether"</span>);</span><br><span class="line"> <span class="keyword">this</span>.balance = web3.utils.fromWei(ret, <span class="string">"ether"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Eth转账"><a href="#Eth转账" class="headerlink" title="Eth转账"></a>Eth转账</h2><p><strong>API</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.sendSignedTransaction(signedTransactionData [, callback])</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong></p>
<ul>
<li><p><code>signedTransactionData</code>-<code>String</code>：以HEX格式签名的交易数据。</p>
<p>交易数据对象可以包含如下字段：</p>
<ul>
<li><code>from</code>- <code>String|Number</code>：发送帐户的地址。如果未指定，则使用web3.eth.defaultAccount属性。或web3.eth.accounts.wallet中本地钱包的地址。</li>
<li><code>to</code>- <code>String</code>:(可选）消息的目标地址，若未定义则为合同发送消息。</li>
<li><code>value</code>- <code>Number|String|BN|BigNumber</code>:(可选）为wei中的交易转移的数量，如果是合约发送消息，则是捐赠给合约地址。</li>
<li><code>gas</code> - <code>Number</code>:(可选，默认：待定）用于交易的gas（未使用的gas会退还）。</li>
<li><code>gasPrice</code>- <code>Number|String|BN|BigNumber</code>:(可选）此交易的gas价格，以wei为单位，默认为<a href="https://web3js.readthedocs.io/en/1.0/web3-eth.html#eth-gasprice" target="_blank" rel="noopener">web3.eth.gasPrice</a>。</li>
<li><code>data</code>- <code>String</code>:(可选）包含合同上函数调用数据的<a href="http://solidity.readthedocs.io/en/latest/abi-spec.html" target="_blank" rel="noopener">ABI字节字符串</a>。</li>
<li><code>nonce</code>- <code>Number</code>:(可选）随机数的整数。</li>
</ul>
</li>
<li><p><code>callback</code>-<code>Function</code>：（可选）可选回调，将错误对象作为第一个参数返回，结果作为第二个参数返回。</p>
</li>
</ul>
<p><strong>返回</strong></p>
<p><code>PromiEvent</code>：promise组合的事件，将在交易完成时调用。包含以下事件</p>
<ul>
<li><code>&quot;transactionHash&quot;</code>返回<code>String</code>：在发送事务并且事务哈希可用之后立即触发。</li>
<li><code>&quot;receipt&quot;</code>返回<code>Object</code>：在交易确认时触发。</li>
<li><code>&quot;confirmation&quot;</code>返回<code>Number</code>，<code>Object</code>：每次确认都会被调用，直到第12次确认。接收确认编号作为第一个参数，将数据作为第二个参数。</li>
<li><code>&quot;error&quot;</code>返回<code>Error</code>：如果在发送过程中发生错误，则会触发。</li>
</ul>
<ol>
<li><p>构建转账参数</p>
<p>区块链转账和支付宝转账类似，需要 <code>发送方</code> 、<code>接收方</code>、<code>金额</code>、<code>密码</code></p>
<p>另外需要添加部分区块链参数：<code>矿工费gas</code>、<code>地址转账交易次数</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取账户交易次数</span></span><br><span class="line"> <span class="keyword">let</span> nonce = <span class="keyword">await</span> web3.eth.getTransactionCount(fromaddress);</span><br><span class="line"> <span class="comment">// 获取预计转账gas费</span></span><br><span class="line"> <span class="keyword">let</span> gasPrice = <span class="keyword">await</span> web3.eth.getGasPrice();</span><br><span class="line"> <span class="comment">// 转账金额以wei为单位</span></span><br><span class="line"> <span class="keyword">let</span> balance = <span class="keyword">await</span> web3.utils.toWei(number);</span><br><span class="line"> <span class="keyword">var</span> rawTx = &#123;</span><br><span class="line">   <span class="keyword">from</span>: fromaddress,</span><br><span class="line">   nonce: nonce,</span><br><span class="line">   gasPrice: gasPrice,</span><br><span class="line">   to: toaddress,</span><br><span class="line">   value: balance,</span><br><span class="line">   data: <span class="string">"0x00"</span>, <span class="comment">//转Token代币会用到的一个字段</span></span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过转账参数计算最终gas费用，并将通过私钥将转账参数进行编码加密</p>
<blockquote>
<p>ethereumjs-tx 第三方库请选择1.3.7版本</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Tx <span class="keyword">from</span> <span class="string">"ethereumjs-tx"</span>;  </span><br><span class="line"><span class="comment">// 将私钥去除“ox”后进行hex转化</span></span><br><span class="line">      <span class="keyword">var</span> privateKey = <span class="keyword">new</span> Buffer(privatekey.slice(<span class="number">2</span>), <span class="string">"hex"</span>);</span><br><span class="line">      <span class="comment">//需要将交易的数据进行预估gas计算，然后将gas值设置到数据参数中</span></span><br><span class="line">      <span class="keyword">let</span> gas = <span class="keyword">await</span> web3.eth.estimateGas(rawTx);</span><br><span class="line">      rawTx.gas = gas;</span><br><span class="line">     <span class="comment">// 通过 ethereumjs-tx 实现私钥加密Ï</span></span><br><span class="line">      <span class="keyword">var</span> tx = <span class="keyword">new</span> Tx(rawTx);</span><br><span class="line">      tx.sign(privateKey);</span><br><span class="line">      <span class="keyword">var</span> serializedTx = tx.serialize();</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过 <code>sendSignedTransaction</code> api发送转账交易，并且获取交易id</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">web3.eth</span><br><span class="line">  .sendSignedTransaction(<span class="string">"0x"</span> + serializedTx.toString(<span class="string">"hex"</span>))</span><br><span class="line">  .on(<span class="string">"transactionHash"</span>, (txid) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"交易成功,请在区块链浏览器查看"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"交易id"</span>, txid);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`https://goerli.etherscan.io/tx/<span class="subst">$&#123;txid&#125;</span>`</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// .on('receipt', (ret)=&gt;&#123;console.log('receipt')&#125;)</span></span><br><span class="line">  <span class="comment">// .on('confirmation', (ret)=&gt;&#123;console.log('confirmation')&#125;)</span></span><br><span class="line">  .on(<span class="string">"error"</span>, (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"error:"</span> + err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><p>区块链浏览器或者目标钱包产看转账结果</p>
<p>goerli区块链浏览器 <a href="https://goerli.etherscan.io/tx/交易id" target="_blank" rel="noopener">https://goerli.etherscan.io/tx/交易id</a></p>
</li>
</ol>
<h1 id="账户系统"><a href="#账户系统" class="headerlink" title="账户系统"></a>账户系统</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p>在前面的教程中我们对以太坊钱包已经有了一定的认识，上一章也重点介绍了账号地址的生成过程，在以太坊钱包中一个重点就是账户系统，在这个模块中很多初学同学不是很清楚密码、keystore、助记词与私钥它们之间的关系。下面我们来看看它们之间到底有着怎样的爱恨情仇，让大家琢磨不透。</p>
</blockquote>
<p><code>密码</code></p>
<p>密码不是私钥，它是在创建账户时候的密码（可以修改）</p>
<p>密码在以下情况下会使用到：</p>
<ol>
<li>作为转账的支付密码</li>
<li>用keystore导入钱包的时候需要输入的密码，用来解锁keystore的</li>
</ol>
<p><code>私钥 Private Key</code></p>
<p>私钥由64位长度的十六进制的字符组成，比如：<code>0xA4356E49C88C8B7AB370AF7D5C0C54F0261AAA006F6BDE09CD4745CF54E0115A</code>，一个账户只有一个私钥且不能修改。<br>通常一个钱包中私钥和公钥是成对出现的，有了私钥，我们就可以通过一定的算法生成公钥，再通过公钥经过一定的算法生成地址，这一过程都是不可逆的。私钥一定要妥善保管，若被泄漏别人可以通过私钥解锁账号转出你的该账号的数字货币。</p>
<p><code>公钥 Public Key</code></p>
<p>公钥(Public Key)是和私钥成对出现的，和私钥一起组成一个密钥对，保存在钱包中。公钥由私钥生成，但是无法通过公钥倒推得到私钥。公钥能够通过一系列算法运算得到钱包的地址，因此可以作为拥有这个钱包地址的凭证。</p>
<p><code>Keystore</code></p>
<p>Keystore常见于以太坊钱包，它是将私钥以加密的方式保存为一份 JSON 文件，这份 JSON 文件就是 keystore，所以它就是加密后的私钥。Keystore必须配合钱包密码才能导入并使用该账号。当黑客盗取 Keystore 后，在没有密码情况下, 有可能通过暴力破解 Keystore 密码解开 Keystore，所以建议使用者在设置密码时稍微复杂些，比如带上特殊字符，至少 8 位以上，并安全存储。</p>
<p><code>助记词 Mnemonic</code></p>
<p>私钥是64位长度的十六进制的字符，不利于记录且容易记错，所以用算法将一串随机数转化为了一串12 ~ 24个容易记住的单词，方便保存记录。注意：</p>
<ol>
<li>助记词是私钥的另一种表现形式</li>
<li>助记词=私钥，这是不正确的说法，通过助记词可以获取相关联的多个私钥，但是通过其中一个私钥是不能获取助记词的，因此<strong>助记词≠私钥</strong>。</li>
</ol>
<p>BIP</p>
<p>要弄清楚助记词与私钥的关系，得清楚BIP协议，是<code>Bitcoin Improvement Proposals</code>的缩写，意思是Bitcoin 的改进建议，用于提出 Bitcoin 的新功能或改进措施。BIP协议衍生了很多的版本，主要有BIP32、BIP39、BIP44。</p>
<p><strong>BIP32</strong></p>
<p>BIP32是 HD钱包的核心提案，通过种子来生成主私钥，然后派生海量的子私钥和地址，种子是一串很长的随机数。</p>
<p><strong>BIP39</strong></p>
<p>由于种子是一串很长的随机数，不利于记录，所以我们用算法将种子转化为一串12 ~ 24个的单词，方便保存记录，这就是BIP39，它扩展了 HD钱包种子的生成算法。</p>
<p><strong>BIP44</strong></p>
<p>BIP44 是在 BIP32 和 BIP43 的基础上增加多币种，提出的层次结构非常全面，它允许处理多个币种，多个帐户，每个帐户有数百万个地址。</p>
<p>在BIP32路径中定义以下5个级别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m/purpse&apos;/coin_type&apos;/account&apos;/change/address_index</span><br></pre></td></tr></table></figure>
<ul>
<li>purpose：在BIP43之后建议将常数设置为44’。表示根据BIP44规范使用该节点的子树。</li>
<li>Coin_type：币种，代表一个主节点（种子）可用于无限数量的独立加密币，如比特币，Litecoin或Namecoin。此级别为每个加密币创建一个单独的子树，避免重用已经在其它链上存在的地址。开发人员可以为他们的项目注册未使用的号码。</li>
<li>Account：账户，此级别为了设置独立的用户身份可以将所有币种放在一个的帐户中，从0开始按顺序递增。</li>
<li>Change：常量0用于外部链，常量1用于内部链，外部链用于钱包在外部用于接收和付款。内部链用于在钱包外部不可见的地址，如返回交易变更。</li>
<li>Address_index：地址索引，按顺序递增的方式从索引0开始编号。</li>
</ul>
<p>BIP44的规则使得 HD钱包非常强大，用户只需要保存一个种子，就能控制所有币种，所有账户的钱包，因此由BIP39 生成的助记词非常重要，所以一定安全妥善保管，那么会不会被破解呢？如果一个 HD 钱包助记词是 12 个单词，一共有 2048 个单词可能性，那么随机的生成的助记词所有可能性大概是<code>5e+39</code>，因此几乎不可能被破解。</p>
<p><code>HD钱包</code></p>
<p>通过BIP协议生成账号的钱包叫做HD钱包。这个HD钱包，并不是Hardware Wallet硬件钱包，这里的 HD 是<code>Hierarchical Deterministic</code>的缩写，意思是分层确定性，所以HD钱包的全称为比特币分成确定性钱包 。</p>
<h2 id="密码、私钥、keystore与助记词的关系"><a href="#密码、私钥、keystore与助记词的关系" class="headerlink" title="密码、私钥、keystore与助记词的关系"></a>密码、私钥、keystore与助记词的关系</h2><p><img src="https://cdn.nlark.com/yuque/0/2022/png/22208307/1668518245248-4c524198-7a6a-482e-802c-d36d31220b06.png" alt="img"></p>
<h2 id="钱包的核心：私钥"><a href="#钱包的核心：私钥" class="headerlink" title="钱包的核心：私钥"></a>钱包的核心：私钥</h2><p>基于以上的分析，我们对以太坊钱包的账号系统有了一个很好的认识，那么我们在使用钱包的过程中，该如何保管自己的钱包呢？主要包含以下几种方式：</p>
<ul>
<li>私钥（Private Key）</li>
<li>Keystore+密码（Keystore+Password）</li>
<li>助记词（Mnemonic code）</li>
</ul>
<p>通过以上三种中的一种方式都可以解锁账号，然后掌控它，所以对于每种方式中的数据都必须妥善包括，如有泄漏，请尽快转移数字资产。</p>
<p>我们可以得到以下总结：</p>
<ul>
<li>通过私钥+密码可以生成keystore，即加密私钥；</li>
<li>通过keystore+密码可以获取私钥，即解密keystore。</li>
<li>通过助记词根据不同的路径获取不同的私钥，即使用HD钱包将助记词转化成种子来生成主私钥，然后派生海量的子私钥和地址。</li>
</ul>
<p>可以看出这几种方式的核心其实都是为了获得私钥，然后去解锁账号，因此钱包的核心功能是私钥的创建、存储和使用。</p>
<p><strong>参考资料</strong></p>
<p><a href="https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html" target="_blank" rel="noopener">https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html</a><br><a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" target="_blank" rel="noopener">https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki</a><br><a href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki" target="_blank" rel="noopener">https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki</a><br><a href="https://github.com/ethereum/EIPs/issues/84" target="_blank" rel="noopener">https://github.com/ethereum/EIPs/issues/84</a><br><a href="https://github.com/ethereum/EIPs/issues/85" target="_blank" rel="noopener">https://github.com/ethereum/EIPs/issues/85</a></p>
<h2 id="创建账户"><a href="#创建账户" class="headerlink" title="创建账户"></a>创建账户</h2><blockquote>
<p>从无到有创建一个新的账户</p>
</blockquote>
<h3 id="web3-直接创建账户"><a href="#web3-直接创建账户" class="headerlink" title="web3 直接创建账户"></a>web3 直接创建账户</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.accounts.create(<span class="string">'2435@#@#@±±±±!!!!678543213456764321§34567543213456785432134567'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="助记词-创建账户"><a href="#助记词-创建账户" class="headerlink" title="助记词 创建账户"></a>助记词 创建账户</h3><p>需要使用<code>bip39</code>协议将助记词转换成种子，再通过<code>ethereumjs-wallet</code>库生成hd钱包，根据路径的不同从hd钱包中获取不同的keypair，keypair中就包含有公钥、私钥，再通过<code>ethereumjs-util</code>库将公钥生成地址，从而根据助记词获取所有关联的账号，能获取到公钥、私钥、地址等数据信息。</p>
<h4 id="1-依赖库"><a href="#1-依赖库" class="headerlink" title="1. 依赖库"></a>1. 依赖库</h4><p>需要用到三个库：bip39、ethereumjs-wallet/hdkey、ethereumjs-util。先安装依赖库，<code>cd</code>到项目跟路径运行命令<code>npm i bip39 ethereumjs-wallet ethereumjs-util</code>。</p>
<ul>
<li><a href="https://github.com/bitcoinjs/bip39" target="_blank" rel="noopener">bip39</a>：随机产生新的 mnemonic code，并可以将其转成 binary 的 seed。</li>
<li><a href="https://github.com/ethereumjs/ethereumjs-wallet" target="_blank" rel="noopener">ethereumjs-wallet</a>：生成和管理公私钥，下面使用其中 hdkey 子套件来创建 HD 钱包。</li>
<li><a href="https://github.com/ethereumjs/ethereumjs-util" target="_blank" rel="noopener">ethereumjs-util</a>：Ethereum 的一个工具库。</li>
<li><a href="https://iancoleman.io/bip39/" target="_blank" rel="noopener">https://iancoleman.io/bip39/</a></li>
</ul>
<h4 id="2-通过助记词创建账号"><a href="#2-通过助记词创建账号" class="headerlink" title="2. 通过助记词创建账号"></a>2. 通过助记词创建账号</h4><ul>
<li><p>创建助记词</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入bip39模块</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> bip39 <span class="keyword">from</span> <span class="string">"bip39"</span>;</span><br><span class="line"><span class="comment">// 创建助记词 </span></span><br><span class="line"><span class="keyword">let</span> mnemonic = bip39.generateMnemonic();</span><br><span class="line"><span class="built_in">console</span>.log(mnemonic);</span><br><span class="line"><span class="comment">// 结果 12位助记词</span></span><br><span class="line"><span class="comment">// vote select solar shy embrace immense lizard stamp scrub vague negative forward</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>根据助记词生成密钥对 keypair</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">      <span class="comment">// 导入分层钱包模块</span></span><br><span class="line"><span class="keyword">import</span> &#123; hdkey &#125; <span class="keyword">from</span> <span class="string">"ethereumjs-wallet"</span>;</span><br><span class="line">      <span class="comment">//1.将助记词转成seed</span></span><br><span class="line">      <span class="keyword">let</span> seed = <span class="keyword">await</span> bip39.mnemonicToSeed(<span class="string">"12位助记词"</span>);</span><br><span class="line">      <span class="comment">//3.通过hdkey将seed生成HD Wallet</span></span><br><span class="line">      <span class="keyword">let</span> hdWallet = hdkey.fromMasterSeed(seed);</span><br><span class="line">      <span class="comment">//4.生成钱包中在m/44'/60'/0'/0/i路径的keypair</span></span><br><span class="line">      <span class="keyword">let</span> keypair = hdWallet.derivePath(<span class="string">"m/44'/60'/0'/0/0"</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(keypair);</span><br></pre></td></tr></table></figure>
<p>keypair 密钥对</p>
<p><img src="https://gitee.com/fcjun/image/raw/master/img/image-20221208222354836.png" alt="image-20221208222354836"></p>
<h4 id="3-由keypair-获取钱包地址和私钥"><a href="#3-由keypair-获取钱包地址和私钥" class="headerlink" title="3. 由keypair 获取钱包地址和私钥"></a>3. 由keypair 获取钱包地址和私钥</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取钱包对象</span></span><br><span class="line"><span class="keyword">let</span> wallet = keypair.getWallet();</span><br><span class="line"><span class="comment">// 获取钱包地址</span></span><br><span class="line"><span class="keyword">let</span> lowerCaseAddress = wallet.getAddressString();</span><br><span class="line"><span class="comment">// 获取钱包校验地址</span></span><br><span class="line"><span class="keyword">let</span> CheckSumAddress = wallet.getChecksumAddressString();</span><br><span class="line"><span class="comment">// 获取私钥</span></span><br><span class="line"><span class="keyword">let</span> prikey = wallet.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"lowerCaseAddress"</span>, lowerCaseAddress);</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"CheckSumAddress"</span>, CheckSumAddress);</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"prikey"</span>, prikey);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">lowerCaseAddress 0xd9fc0fd4412616c7075e68b151ab3a7bcb9a3f54</span></span><br><span class="line"><span class="comment">CheckSumAddress 0xd9fC0FD4412616c7075E68b151ab3A7bcB9A3f54</span></span><br><span class="line"><span class="comment">prikey 3fc11495517f1f015bbcb6c311da66e3b26b23e4c91c1285ccc4b69d9d274002</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="导出账户"><a href="#导出账户" class="headerlink" title="导出账户"></a>导出账户</h2><blockquote>
<p>一个已经存在的账户导出 私钥 和 keystore</p>
</blockquote>
<ol>
<li>通过分层钱包对象 + 密码 创建keystore</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> keystore = <span class="keyword">await</span> wallet.toV3(data.pass1); <span class="comment">// 参数必须为 字符串</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>通过私钥和密码创建 keystore </li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keystore = <span class="keyword">await</span> web3.eth.accounts.encrypt(<span class="string">"账户私钥"</span>,<span class="string">"密码"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟keystore数据</span></span><br><span class="line"><span class="keyword">const</span> keystoreJsonV3 = &#123;</span><br><span class="line">        version: <span class="number">3</span>,</span><br><span class="line">        id: <span class="string">"dbb70fb2-52ad-4e1f-9c19-0b50329f89c3"</span>,</span><br><span class="line">        address: <span class="string">"445b469888528dacd9b87246c5ce70407adaa411"</span>,</span><br><span class="line">        crypto: &#123;</span><br><span class="line">          ciphertext:</span><br><span class="line">            <span class="string">"1e53e7e775644422600188b8134907992db40d278064ea3a966da4dcdf80db64"</span>,</span><br><span class="line">          cipherparams: &#123; <span class="attr">iv</span>: <span class="string">"f9d2b047019674eee449b316f4a21491"</span> &#125;,</span><br><span class="line">          cipher: <span class="string">"aes-128-ctr"</span>,</span><br><span class="line">          kdf: <span class="string">"scrypt"</span>,</span><br><span class="line">          kdfparams: &#123;</span><br><span class="line">            dklen: <span class="number">32</span>,</span><br><span class="line">            salt: <span class="string">"153e074d78d0ba36fae3e46e582c42e53f61653cb5d4f1a3a3f68094e6ca0160"</span>,</span><br><span class="line">            n: <span class="number">8192</span>,</span><br><span class="line">            r: <span class="number">8</span>,</span><br><span class="line">            p: <span class="number">1</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          mac: <span class="string">"e91456c59b2505c16b80c2495ab7b4633273c2ae366cb6953f27de8cfebad629"</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line"> <span class="keyword">const</span> res = web3.eth.accounts.decrypt(keystoreJsonV3, <span class="string">"1235"</span>);</span><br><span class="line"> <span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>通过keystore解密私钥</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ethwallet <span class="keyword">from</span> <span class="string">"ethereumjs-wallet"</span>;  </span><br><span class="line">   <span class="keyword">let</span> pass = prompt(<span class="string">"请输入密码"</span>);</span><br><span class="line">       <span class="keyword">let</span> wallet;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">         wallet = <span class="keyword">await</span> ethwallet.fromV3(keystore, pass);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">         alert(<span class="string">"密码错误"</span>);</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   <span class="keyword">let</span> key = wallet.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="导入账户"><a href="#导入账户" class="headerlink" title="导入账户"></a>导入账户</h2><blockquote>
<p>通过 私钥、助记词、keystore 导入一个已经存在的钱包账户 地址 和 私钥</p>
</blockquote>
<ol>
<li>通过keystore获取 私钥和地址 </li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ethwallet <span class="keyword">from</span> <span class="string">"ethereumjs-wallet"</span>;  </span><br><span class="line">   <span class="keyword">let</span> pass = prompt(<span class="string">"请输入密码"</span>);</span><br><span class="line">       <span class="keyword">let</span> wallet;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">         wallet = <span class="keyword">await</span> ethwallet.fromV3(keystore, pass);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">         alert(<span class="string">"密码错误"</span>);</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="keyword">let</span> key = wallet.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br><span class="line"><span class="keyword">let</span> address = wallet.getAddressString()</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>通过助记词 获取地址和私钥</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mnemonic=prompt(<span class="string">"请输入助记词"</span>)</span><br><span class="line"><span class="keyword">let</span> seed = bip39.mnemonicToSeed(mnemonic)</span><br><span class="line"><span class="keyword">let</span> hdwallet = hdkey.fromMasterSeed(seed)</span><br><span class="line"><span class="keyword">let</span> keypair = hdWallet.derivePath(<span class="string">"m/44'/60'/0'/0/0"</span>);</span><br><span class="line"><span class="comment">// 获取钱包对象</span></span><br><span class="line"><span class="keyword">let</span> wallet = keypair.getWallet();</span><br><span class="line"><span class="comment">// 获取钱包地址</span></span><br><span class="line"><span class="keyword">let</span> lowerCaseAddress = wallet.getAddressString();</span><br><span class="line"><span class="comment">// 获取钱包校验地址</span></span><br><span class="line"><span class="keyword">let</span> CheckSumAddress = wallet.getChecksumAddressString();</span><br><span class="line"><span class="comment">// 获取私钥</span></span><br><span class="line"><span class="keyword">let</span> prikey = wallet.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>通过私钥获取 地址</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ethwallet <span class="keyword">from</span> <span class="string">"ethereumjs-wallet"</span>;     </span><br><span class="line"><span class="keyword">let</span> privatekey=<span class="keyword">new</span> Buffer( prompt(<span class="string">"请输入私钥"</span>), <span class="string">'hex'</span> )</span><br><span class="line"><span class="keyword">let</span> wallet = ethwallet.fromPrivateKey(privatekey)</span><br><span class="line"><span class="comment">// 获取钱包地址</span></span><br><span class="line"><span class="keyword">let</span> lowerCaseAddress = wallet.getAddressString();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="区块链钱包项目流程"><a href="#区块链钱包项目流程" class="headerlink" title="区块链钱包项目流程"></a>区块链钱包项目流程</h1><p><img src="https://gitee.com/fcjun/image/raw/master/img/image-20221209110335777.png" alt="image-20221209110335777"></p>
<h3 id="1-项目准备"><a href="#1-项目准备" class="headerlink" title="1.项目准备"></a>1.项目准备</h3><p>​         直接采用随堂demo创建的项目 不需要重新创建</p>
<h4 id="web3相关第三方包-1"><a href="#web3相关第三方包-1" class="headerlink" title="web3相关第三方包"></a>web3相关第三方包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install web3 bip39 ethereumjs-tx@1.3.7 ethereumjs-util ethereumjs-wallet</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注： ethereumjs-tx 使用1.3.7 版本</p>
</blockquote>
<h4 id="node-polyfill-兼容文件配置-1"><a href="#node-polyfill-兼容文件配置-1" class="headerlink" title="node-polyfill 兼容文件配置"></a>node-polyfill 兼容文件配置</h4><ol>
<li><p>下载polyfill 插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-polyfill-webpack-plugin -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>在vue.config.js 文件中配置插件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">'@vue/cli-service'</span>)</span><br><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line">++ <span class="keyword">const</span> NodePolyfillWebpackPlugin = <span class="built_in">require</span>(<span class="string">"node-polyfill-webpack-plugin"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: <span class="literal">true</span>,</span><br><span class="line">++  configureWebpack: &#123;</span><br><span class="line">++    plugins: [</span><br><span class="line">++      <span class="keyword">new</span> NodePolyfillWebpackPlugin()</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="配置vant-ui-ui组件库-1"><a href="#配置vant-ui-ui组件库-1" class="headerlink" title="配置vant-ui ui组件库"></a>配置vant-ui ui组件库</h4><p><a href="https://vant-contrib.gitee.io/vant/#/zh-CN" target="_blank" rel="noopener">https://vant-contrib.gitee.io/vant/#/zh-CN</a></p>
<ol>
<li>安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i vant</span><br><span class="line">$ npm i unplugin-vue-components -D</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在vue.config.js 文件中配置插件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">"@vue/cli-service"</span>);</span><br><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line"><span class="keyword">const</span> NodePolyfillWebpackPlugin = <span class="built_in">require</span>(<span class="string">"node-polyfill-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// vant</span></span><br><span class="line">++ <span class="keyword">const</span> &#123; VantResolver &#125; = <span class="built_in">require</span>(<span class="string">'unplugin-vue-components/resolvers'</span>);</span><br><span class="line">++ <span class="keyword">const</span> ComponentsPlugin = <span class="built_in">require</span>(<span class="string">'unplugin-vue-components/webpack'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: <span class="literal">true</span>,</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> NodePolyfillWebpackPlugin(),</span><br><span class="line">++    ComponentsPlugin(&#123; <span class="attr">resolvers</span>: [VantResolver()]&#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>测试 在app.vue文件添加代码</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;van-button type=&quot;primary&quot;&gt;test&lt;/van-button&gt;</span><br><span class="line"> &lt;van-button type=&quot;success&quot;&gt;test&lt;/van-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/fcjun/image/raw/master/img/202301022022983.png" alt="image-20230102202255947"></p>
<h4 id="通过vw配置响应式-1"><a href="#通过vw配置响应式-1" class="headerlink" title="通过vw配置响应式"></a>通过vw配置响应式</h4><p><a href="https://www.cnblogs.com/hongrun/p/16130707.html" target="_blank" rel="noopener">https://www.cnblogs.com/hongrun/p/16130707.html</a></p>
<ol>
<li>安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在根目录下创建 名为 <code>postcss.config.js</code> 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    <span class="string">"postcss-px-to-viewport"</span>: &#123;</span><br><span class="line">      unitToConvert: <span class="string">"px"</span>, <span class="comment">// 要转化的单位</span></span><br><span class="line">      viewportWidth: <span class="number">375</span>, <span class="comment">// UI设计稿的宽度</span></span><br><span class="line">      unitPrecision: <span class="number">6</span>, <span class="comment">// 转换后的精度，即小数点位数</span></span><br><span class="line">      propList: [<span class="string">"*"</span>], <span class="comment">// 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span></span><br><span class="line">      viewportUnit: <span class="string">"vw"</span>, <span class="comment">// 指定需要转换成的视窗单位，默认vw</span></span><br><span class="line">      fontViewportUnit: <span class="string">"vw"</span>, <span class="comment">// 指定字体需要转换成的视窗单位，默认vw      selectorBlackList: ["wrap"], // 指定不转换为视窗单位的类名，</span></span><br><span class="line">      minPixelValue: <span class="number">1</span>, <span class="comment">// 默认值1，小于或等于1px则不进行转换</span></span><br><span class="line">      mediaQuery: <span class="literal">true</span>, <span class="comment">// 是否在媒体查询的css代码中也进行转换，默认false</span></span><br><span class="line">      replace: <span class="literal">true</span>, <span class="comment">// 是否转换后直接更换属性值</span></span><br><span class="line">      exclude: [<span class="regexp">/node_modules/</span>], <span class="comment">// 设置忽略文件，用正则做目录名匹配</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="封装缓存函数"><a href="#封装缓存函数" class="headerlink" title="封装缓存函数"></a>封装缓存函数</h4><p>整个项目为了保证钱包的安全性，所有账户相关的操作，不经过中心化服务器，只在缓存使用</p>
<p>在这里可以参考<code>webstorage</code>增加过期时间，cookie 等的封装</p>
<p>创建 src/utils/storage.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Storage</span> </span>&#123;</span><br><span class="line">  setItem(key, val) &#123;</span><br><span class="line">    localStorage.setItem(key, <span class="built_in">JSON</span>.stringify(val || <span class="string">""</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  getItem(key) &#123;</span><br><span class="line">    <span class="keyword">let</span> val;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      val = <span class="built_in">JSON</span>.parse(localStorage.getItem(key));</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      val = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Storage();</span><br></pre></td></tr></table></figure>
<h4 id="app-vue-文件引入"><a href="#app-vue-文件引入" class="headerlink" title="app.vue 文件引入"></a>app.vue 文件引入</h4><p>在app.vue 引入文件并且初始化web3.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">   &lt;h3&gt; qf - eth -wallet&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// import * as util from &quot;ethereumjs-util&quot;;</span><br><span class="line">import ethwallet from &quot;ethereumjs-wallet&quot;;  </span><br><span class="line">import &#123; hdkey &#125; from &quot;ethereumjs-wallet&quot;;</span><br><span class="line">import * as bip39 from &quot;bip39&quot;;</span><br><span class="line">import Tx from &quot;ethereumjs-tx&quot;;</span><br><span class="line">import Web3 from &quot;web3&quot;;</span><br><span class="line">import storage from &quot;@/utils/storage&quot;;</span><br><span class="line">var web3 = new Web3(</span><br><span class="line">  Web3.givenProvider ||</span><br><span class="line">    &quot;https://goerli.infura.io/v3/e4f789009c9245eeaad1d93ce9d059bb&quot;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-通过Mnemonic助记词创建钱包"><a href="#2-通过Mnemonic助记词创建钱包" class="headerlink" title="2.通过Mnemonic助记词创建钱包"></a>2.通过Mnemonic助记词创建钱包</h3><blockquote>
<p> 判断缓存是否有 钱包对象</p>
<ol>
<li>有钱包对象显示钱包信息  地址 私钥  余额</li>
<li>没有钱包对象显示创建钱包按钮</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h3&gt;qf - eth -wallet&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;创建钱包&lt;/h4&gt;</span><br><span class="line">    &lt;van-button type=&quot;primary&quot; @click=&quot;createWallet&quot;&gt; 创建钱包 &lt;/van-button&gt;</span><br><span class="line">    &lt;van-button type=&quot;primary&quot; @click=&quot;importWallet&quot;&gt;</span><br><span class="line">      导入钱包-助记词</span><br><span class="line">    &lt;/van-button&gt;</span><br><span class="line">    &lt;h4&gt;钱包信息&lt;/h4&gt;</span><br><span class="line">    &#123;&#123; wallet &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">// import * as util from &quot;ethereumjs-util&quot;;</span><br><span class="line">import ethwallet from &quot;ethereumjs-wallet&quot;;</span><br><span class="line">import &#123; hdkey &#125; from &quot;ethereumjs-wallet&quot;;</span><br><span class="line">import * as bip39 from &quot;bip39&quot;;</span><br><span class="line">import Tx from &quot;ethereumjs-tx&quot;;</span><br><span class="line">import storage from &quot;@/utils/storage&quot;;</span><br><span class="line">import Web3 from &quot;web3&quot;;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">var web3 = new Web3(</span><br><span class="line">  Web3.givenProvider ||</span><br><span class="line">    &quot;https://goerli.infura.io/v3/e4f789009c9245eeaad1d93ce9d059bb&quot;</span><br><span class="line">);</span><br><span class="line">const wallet = reactive(storage.getItem(&quot;wallet&quot;) || &#123;&#125;);</span><br><span class="line">console.log(wallet);</span><br><span class="line">async function createWallet() &#123;</span><br><span class="line">  const pass = prompt(&quot;请输入您的钱包密码&quot;);</span><br><span class="line">  if (!pass) return false;</span><br><span class="line">  let mnemonic = bip39.generateMnemonic();</span><br><span class="line">  alert(&quot;您的助记词为:&quot; + mnemonic);</span><br><span class="line">  const checkMnemonic = prompt(&quot;请输入您的助记词&quot;);</span><br><span class="line">  if (mnemonic === checkMnemonic) &#123;</span><br><span class="line">    //1.将助记词转成seed</span><br><span class="line">    let seed = await bip39.mnemonicToSeed(mnemonic);</span><br><span class="line">    //3.通过hdkey将seed生成HD Wallet</span><br><span class="line">    let hdWallet = hdkey.fromMasterSeed(seed);</span><br><span class="line">    //4.生成钱包中在m/44&apos;/60&apos;/0&apos;/0/i路径的keypair</span><br><span class="line">    let keyPair = hdWallet.derivePath(&quot;m/44&apos;/60&apos;/0&apos;/0/0&quot;);</span><br><span class="line">    // 获取钱包对象</span><br><span class="line">    let wallet = keyPair.getWallet();</span><br><span class="line">    // 获取钱包地址</span><br><span class="line">    let lowerCaseAddress = wallet.getAddressString();</span><br><span class="line">    // 获取钱包校验地址</span><br><span class="line">    let CheckSumAddress = wallet.getChecksumAddressString();</span><br><span class="line">    // 获取私钥</span><br><span class="line">    let prikey = wallet.getPrivateKey().toString(&quot;hex&quot;);</span><br><span class="line">    let keystore = await wallet.toV3(pass);</span><br><span class="line">    console.log(keystore);</span><br><span class="line">    // 保存钱包信息</span><br><span class="line">    const walletInfo = &#123;</span><br><span class="line">      address: lowerCaseAddress,</span><br><span class="line">      prikey,</span><br><span class="line">      keystore,</span><br><span class="line">      balance: 0,</span><br><span class="line">      mnemonic, // 助记词不应该记录下来仅仅是为了便于演示</span><br><span class="line">    &#125;;</span><br><span class="line">    storage.setItem(&quot;wallet&quot;, walletInfo);</span><br><span class="line">    wallet = walletInfo;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    alert(&quot;助记词错误请重新输入&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-显示余额"><a href="#3-显示余额" class="headerlink" title="3.显示余额"></a>3.显示余额</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> balance = ref(<span class="string">"0"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取余额</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getBalance</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!wallet.address) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">// 根据地址查询余额</span></span><br><span class="line">  web3.eth.getBalance(wallet.address).then(<span class="function">(<span class="params">ret</span>) =&gt;</span> &#123;</span><br><span class="line">    balance.value = web3.utils.fromWei(ret, <span class="string">"ether"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">getBalance()</span><br></pre></td></tr></table></figure>
<h3 id="4-转账交易"><a href="#4-转账交易" class="headerlink" title="4.转账交易"></a>4.转账交易</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 获取用户输入金额 与 地址 </span><br><span class="line"><span class="number">2.</span> 调用send 方法</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> keystore = storage.getItem(<span class="string">"wallet"</span>).keystore;</span><br><span class="line">  <span class="keyword">let</span> pass = prompt(<span class="string">"请输入密码"</span>);</span><br><span class="line">  <span class="keyword">let</span> walletobj;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    walletobj = <span class="keyword">await</span> ethwallet.fromV3(keystore, pass);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    alert(<span class="string">"密码错误"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> key = walletobj.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br><span class="line">  <span class="keyword">var</span> privateKey = <span class="keyword">new</span> Buffer(key, <span class="string">"hex"</span>);</span><br><span class="line">  <span class="comment">// console.log(privateKey);</span></span><br><span class="line">  <span class="keyword">const</span> fromaddress = wallet.address;</span><br><span class="line">  <span class="comment">// 获取账户交易次数</span></span><br><span class="line">  <span class="keyword">let</span> nonce = <span class="keyword">await</span> web3.eth.getTransactionCount(fromaddress);</span><br><span class="line">  <span class="comment">// 获取预计转账gas费</span></span><br><span class="line">  <span class="keyword">let</span> gasPrice = <span class="keyword">await</span> web3.eth.getGasPrice();</span><br><span class="line">  <span class="comment">// 转账金额以wei为单位</span></span><br><span class="line">  <span class="built_in">console</span>.log(number.value, <span class="keyword">typeof</span> number.value);</span><br><span class="line">  <span class="keyword">let</span> balance = Web3.utils.toWei(number.value);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">222</span>);</span><br><span class="line">  <span class="keyword">var</span> rawTx = &#123;</span><br><span class="line">    <span class="keyword">from</span>: fromaddress,</span><br><span class="line">    nonce: nonce,</span><br><span class="line">    gasPrice: gasPrice,</span><br><span class="line">    to: toaddress.value,</span><br><span class="line">    value: balance,</span><br><span class="line">    data: <span class="string">"0x00"</span>, <span class="comment">//转Token代币会用到的一个字段</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//需要将交易的数据进行预估gas计算，然后将gas值设置到数据参数中</span></span><br><span class="line">  <span class="keyword">let</span> gas = <span class="keyword">await</span> web3.eth.estimateGas(rawTx);</span><br><span class="line">  rawTx.gas = gas;</span><br><span class="line">  <span class="comment">// 通过 ethereumjs-tx 实现私钥加密Ï</span></span><br><span class="line">  <span class="keyword">var</span> tx = <span class="keyword">new</span> Tx(rawTx);</span><br><span class="line">  tx.sign(privateKey);</span><br><span class="line">  <span class="keyword">var</span> serializedTx = tx.serialize();</span><br><span class="line"></span><br><span class="line">  web3.eth</span><br><span class="line">    .sendSignedTransaction(<span class="string">"0x"</span> + serializedTx.toString(<span class="string">"hex"</span>))</span><br><span class="line">    .on(<span class="string">"transactionHash"</span>, (txid) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"交易成功,请在区块链浏览器查看"</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"交易id"</span>, txid);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`https://goerli.etherscan.io/tx/<span class="subst">$&#123;txid&#125;</span>`</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// .on('receipt', (ret)=&gt;&#123;console.log('receipt')&#125;)</span></span><br><span class="line">    <span class="comment">// .on('confirmation', (ret)=&gt;&#123;console.log('confirmation')&#125;)</span></span><br><span class="line">    .on(<span class="string">"error"</span>, (err) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"error:"</span> + err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-导出账户信息"><a href="#5-导出账户信息" class="headerlink" title="5.导出账户信息"></a>5.导出账户信息</h3><ul>
<li>导出私钥</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">exportKey</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> pass = prompt(<span class="string">"请输入密码"</span>);</span><br><span class="line">       <span class="keyword">let</span> walletObj;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">        walletObj = <span class="keyword">await</span> ethwallet.fromV3(wallet.keystore, pass);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">         alert(<span class="string">"密码错误"</span>);</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   <span class="keyword">let</span> key = walletObj.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br><span class="line">   alert(key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>导出keystore </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">缓存对象</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exportKeyStore</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="built_in">JSON</span>.stringify(wallet.keystore))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-解锁账户信息"><a href="#6-解锁账户信息" class="headerlink" title="6.解锁账户信息"></a>6.解锁账户信息</h3><ul>
<li><p>助记词解锁</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">添加助记词导入钱包方法</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">importWallet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> mnemonic = prompt(<span class="string">"请输入助记词"</span>);</span><br><span class="line">  <span class="keyword">const</span> pass = prompt(<span class="string">"请输入您的钱包密码"</span>);</span><br><span class="line">  <span class="keyword">if</span> (!pass) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//1.将助记词转成seed</span></span><br><span class="line">    <span class="keyword">let</span> seed = <span class="keyword">await</span> bip39.mnemonicToSeed(mnemonic);</span><br><span class="line">    <span class="comment">//3.通过hdkey将seed生成HD Wallet</span></span><br><span class="line">    <span class="keyword">let</span> hdWallet = hdkey.fromMasterSeed(seed);</span><br><span class="line">    <span class="comment">//4.生成钱包中在m/44'/60'/0'/0/i路径的keypair</span></span><br><span class="line">    <span class="keyword">let</span> keyPair = hdWallet.derivePath(<span class="string">"m/44'/60'/0'/0/0"</span>);</span><br><span class="line">    <span class="comment">// 获取钱包对象</span></span><br><span class="line">    <span class="keyword">let</span> wallet = keyPair.getWallet();</span><br><span class="line">    <span class="comment">// 获取钱包地址</span></span><br><span class="line">    <span class="keyword">let</span> lowerCaseAddress = wallet.getAddressString();</span><br><span class="line">    <span class="comment">// 获取钱包校验地址</span></span><br><span class="line">    <span class="keyword">let</span> CheckSumAddress = wallet.getChecksumAddressString();</span><br><span class="line">    <span class="comment">// 获取私钥</span></span><br><span class="line">    <span class="keyword">let</span> prikey = wallet.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br><span class="line">    <span class="keyword">let</span> keystore = <span class="keyword">await</span> wallet.toV3(pass);</span><br><span class="line">    <span class="built_in">console</span>.log(keystore);</span><br><span class="line">    <span class="comment">// 保存钱包信息</span></span><br><span class="line">    <span class="keyword">const</span> walletInfo = &#123;</span><br><span class="line">      address: lowerCaseAddress,</span><br><span class="line">      prikey,</span><br><span class="line">      keystore,</span><br><span class="line">      balance: <span class="number">0</span>,</span><br><span class="line">      mnemonic, <span class="comment">// 助记词不应该记录下来仅仅是为了便于演示</span></span><br><span class="line">    &#125;;</span><br><span class="line">    storage.setItem(<span class="string">"wallet"</span>, walletInfo);</span><br><span class="line">    wallet = walletInfo;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>私钥解锁</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">importByPrivateKey</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">const</span> key = prompt(<span class="string">"请输入私钥"</span>)</span><br><span class="line">	<span class="keyword">let</span> privatekey=<span class="keyword">new</span> Buffer(key , <span class="string">'hex'</span> )</span><br><span class="line">  <span class="keyword">let</span> pass =  prompt(<span class="string">"请输入密码"</span>);</span><br><span class="line">	<span class="keyword">let</span> wallet = ethwallet.fromPrivateKey(privatekey)</span><br><span class="line">  <span class="keyword">let</span> keystore = <span class="keyword">await</span> wallet.toV3(pass);</span><br><span class="line">  <span class="comment">// 获取钱包地址</span></span><br><span class="line">  <span class="keyword">let</span> lowerCaseAddress = wallet.getAddressString();</span><br><span class="line">  <span class="keyword">const</span> walletInfo = &#123;</span><br><span class="line">      address: lowerCaseAddress,</span><br><span class="line">      prikey: key,</span><br><span class="line">      keystore,</span><br><span class="line">      balance: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">console</span>.log(walletInfo)</span><br><span class="line">    storage.setItem(<span class="string">"wallet"</span>, walletInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>未来展望<ul>
<li>通过uniapp 、rn、electron 将项目变为app和桌面端应用</li>
<li>app添加扫码转账功能</li>
<li>增加erc20代币转账功能</li>
<li>增加nft数字藏品商城功能</li>
<li>增加Dao 应用</li>
</ul>
</li>
</ol>
<h1 id="智能合约"><a href="#智能合约" class="headerlink" title="智能合约"></a>智能合约</h1><ol>
<li><p>通过智能合约文件 获取abi</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; abi &#125; <span class="keyword">from</span> <span class="string">"@/contract/HHC.json"</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在web3实例的基础上创建智能合约实例</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hhc = <span class="keyword">new</span> <span class="keyword">this</span>.web3.eth.Contract(</span><br><span class="line">  abi,</span><br><span class="line">  <span class="string">"0x18dAaC8e2E422fDB5e26715eF1EcDca11F78eDE5"</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>通过智能合约实例获取代币余额</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> num = <span class="keyword">await</span> hhc.methods.balanceOf(address).call();</span><br><span class="line">Web3.utils.fromWei(num, <span class="string">"ether"</span>);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>智能合约交易hash 创建</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> createCoinTransationHx(contractInstance, method, to, value) &#123;</span><br><span class="line">   <span class="keyword">let</span> pass = prompt(<span class="string">"请输入密码"</span>);</span><br><span class="line">   <span class="keyword">let</span> wallet;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">     wallet = <span class="keyword">await</span> ethwallet.fromV3(keystore, pass);</span><br><span class="line">   &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">     alert(<span class="string">"密码错误"</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">let</span> key = wallet.getPrivateKey().toString(<span class="string">"hex"</span>);</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">from</span> = <span class="keyword">this</span>.ownerAddress;</span><br><span class="line">   <span class="comment">// 当前地址交易次数</span></span><br><span class="line">   <span class="keyword">const</span> nonce = <span class="keyword">await</span> <span class="keyword">this</span>.instance.eth.getTransactionCount(<span class="keyword">from</span>);</span><br><span class="line">   <span class="keyword">var</span> privateKey = <span class="keyword">new</span> Buffer(key, <span class="string">"hex"</span>);</span><br><span class="line">   <span class="comment">// 获取预计转账gas费</span></span><br><span class="line">   <span class="keyword">let</span> gasPrice = <span class="keyword">await</span> <span class="keyword">this</span>.instance.eth.getGasPrice();</span><br><span class="line">   <span class="comment">// 转账金额以wei为单位</span></span><br><span class="line">   <span class="keyword">let</span> weiValue = <span class="keyword">await</span> Web3.utils.toWei(value);</span><br><span class="line">   <span class="comment">// 转账的记录对象</span></span><br><span class="line">   <span class="comment">// 代币转账</span></span><br><span class="line">   <span class="comment">// this.HccCont = new this.web3.eth.Contract(</span></span><br><span class="line">   <span class="comment">//   abi,</span></span><br><span class="line">   <span class="comment">//   "0x18dAaC8e2E422fDB5e26715eF1EcDca11F78eDE5"</span></span><br><span class="line">   <span class="comment">// );</span></span><br><span class="line">   <span class="keyword">const</span> contractAbi = <span class="keyword">await</span> contractInstance.methods[method](</span><br><span class="line">     to,</span><br><span class="line">     weiValue</span><br><span class="line">   ).encodeABI();</span><br><span class="line">   <span class="comment">// console.log(contractAbi);</span></span><br><span class="line">   <span class="comment">// console.log(contractInstance._address);</span></span><br><span class="line">   <span class="comment">// return false;</span></span><br><span class="line">   <span class="keyword">var</span> rawTx = &#123;</span><br><span class="line">     <span class="keyword">from</span>: <span class="keyword">this</span>.ownerAddress,</span><br><span class="line">     nonce: nonce,</span><br><span class="line">     gasPrice: gasPrice,</span><br><span class="line">     to: contractInstance._address, <span class="comment">//eth 转账 to 目标地址 ，智能合约 to 智能合约地址</span></span><br><span class="line">     value: <span class="number">0</span>, <span class="comment">//eth 转账 数量</span></span><br><span class="line">     data: contractAbi, <span class="comment">//智能合约方法的abi编码</span></span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="comment">//需要将交易的数据进行预估gas计算，然后将gas值设置到数据参数中</span></span><br><span class="line">   <span class="keyword">let</span> gas = <span class="keyword">await</span> <span class="keyword">this</span>.instance.eth.estimateGas(rawTx);</span><br><span class="line">   rawTx.gas = gas;</span><br><span class="line">   <span class="comment">// 通过tx实现交易对象的加密操作</span></span><br><span class="line">   <span class="keyword">var</span> tx = <span class="keyword">new</span> Tx(rawTx);</span><br><span class="line">   tx.sign(privateKey);</span><br><span class="line">   <span class="keyword">var</span> serializedTx = tx.serialize();</span><br><span class="line">   <span class="keyword">var</span> transationHx = <span class="string">"0x"</span> + serializedTx.toString(<span class="string">"hex"</span>);</span><br><span class="line">   <span class="keyword">return</span> transationHx;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><p>智能合约代币转账</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.web3.eth</span><br><span class="line">      .sendSignedTransaction(hx)</span><br><span class="line">      .on(<span class="string">"transactionHash"</span>, (txid) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"交易成功,请在区块链浏览器查看"</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"交易id"</span>, txid);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`https://goerli.etherscan.io/tx/<span class="subst">$&#123;txid&#125;</span>`</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">"receipt"</span>, (ret) =&gt; &#123;</span><br><span class="line">        cb &amp;&amp; cb(ret);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"receipt"</span>, ret);</span><br><span class="line">        <span class="keyword">const</span> &#123; transactionHash &#125; = ret;</span><br><span class="line">        <span class="keyword">this</span>.createOrderData(transactionHash);</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">"latestBlockHash"</span>, (...arg) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"latestBlockHash"</span>, arg);</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">"error"</span>, (err) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"error:"</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>以上内容来自千锋教育，并无商业用途，仅供学习使用。</p>
</blockquote>

        </div>

        
            <div class="article-tags tags">
                
                    <a href="/tags/WEB3/"><i class="fa fa-tag"></i>&nbsp;&nbsp;WEB3</a>
                
            </div>
        

        
            <div class="art-item-footer">
                
                    <span class="art-item-left">
                        <i class="fa fa-chevron-left" aria-hidden="true"></i>&nbsp;
                        <a href="/2025/03/11/solidity入门/" rel="prev" title="solidity入门">
                            solidity入门
                        </a>
                    </span>
                
                
                    <span class="art-item-right">
                        <a href="/2025/02/20/RAG系统搭建-基础版/" rel="next" title="RAG系统搭建(基础版)">
                            RAG系统搭建(基础版)
                        </a>&nbsp;
                        <i class="fa fa-chevron-right" aria-hidden="true"></i>
                    </span>
                
            </div>
        

    </section>

</article>

<br>

<!-- 显示推荐文章和评论 -->


<script>
    window.subData = {
        title: '以太坊钱包开发',
        tools: true
    }
</script>


      </div>
      <aside class='l_side'>
        
  <section class='m_widget about'>
    
        <img class='avatar waves-image' src='https://avatars2.githubusercontent.com/u/20313228?s=400&u=81b6a332e9a0f8c63e4841766106f3c8f881cfb5&v=4' />
    
</section>


  <section class='m_widget categories'>
<div class='header'><i class="fa fa-sitemap" aria-hidden="true"></i>&nbsp;&nbsp;分类</div>
<div class='content'>
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/css/"><div class='name'>css</div><div class='badge'>11</div></a></li>
    
        <li><a class="flat-box" href="/categories/javascript/"><div class='name'>javascript</div><div class='badge'>182</div></a></li>
    
        <li><a class="flat-box" href="/categories/nodejs/"><div class='name'>nodejs</div><div class='badge'>21</div></a></li>
    
        <li><a class="flat-box" href="/categories/python/"><div class='name'>python</div><div class='badge'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/服务器/"><div class='name'>服务器</div><div class='badge'>17</div></a></li>
    
        <li><a class="flat-box" href="/categories/计算机原理/"><div class='name'>计算机原理</div><div class='badge'>21</div></a></li>
    
    </ul>
    
</div>
</section>


  
<div class="m_widget tagcloud">
    <div class="header"><i class="fa fa-tags" aria-hidden="true"></i>&nbsp;&nbsp;标签</div>
    <div class='content'>
        <a href="/tags/3D/" style="font-size: 14.83px; color: #939393">3D</a> <a href="/tags/AI/" style="font-size: 14.83px; color: #939393">AI</a> <a href="/tags/MYSQL笔记/" style="font-size: 20.67px; color: #6c6c6c">MYSQL笔记</a> <a href="/tags/Threejs/" style="font-size: 15.67px; color: #8e8e8e">Threejs</a> <a href="/tags/WEB3/" style="font-size: 15.67px; color: #8e8e8e">WEB3</a> <a href="/tags/ajax/" style="font-size: 18.17px; color: #7d7d7d">ajax</a> <a href="/tags/canvas/" style="font-size: 14.83px; color: #939393">canvas</a> <a href="/tags/cordova/" style="font-size: 14px; color: #999">cordova</a> <a href="/tags/docker/" style="font-size: 14px; color: #999">docker</a> <a href="/tags/electron/" style="font-size: 14px; color: #999">electron</a> <a href="/tags/github/" style="font-size: 18.17px; color: #7d7d7d">github</a> <a href="/tags/hexo/" style="font-size: 14px; color: #999">hexo</a> <a href="/tags/html/" style="font-size: 17.33px; color: #828282">html</a> <a href="/tags/jquery/" style="font-size: 15.67px; color: #8e8e8e">jquery</a> <a href="/tags/linux/" style="font-size: 14.83px; color: #939393">linux</a> <a href="/tags/nodejs/" style="font-size: 15.67px; color: #8e8e8e">nodejs</a> <a href="/tags/npm/" style="font-size: 14px; color: #999">npm</a> <a href="/tags/typescript/" style="font-size: 15.67px; color: #8e8e8e">typescript</a> <a href="/tags/vue/" style="font-size: 21.5px; color: #666">vue</a> <a href="/tags/webSocket/" style="font-size: 14px; color: #999">webSocket</a> <a href="/tags/webpack/" style="font-size: 18.17px; color: #7d7d7d">webpack</a> <a href="/tags/web图形/" style="font-size: 18.17px; color: #7d7d7d">web图形</a> <a href="/tags/web安全/" style="font-size: 18.17px; color: #7d7d7d">web安全</a> <a href="/tags/web性能/" style="font-size: 19px; color: #777">web性能</a> <a href="/tags/worker/" style="font-size: 14.83px; color: #939393">worker</a> <a href="/tags/兼容性/" style="font-size: 15.67px; color: #8e8e8e">兼容性</a> <a href="/tags/后端/" style="font-size: 15.67px; color: #8e8e8e">后端</a> <a href="/tags/后端代理服务/" style="font-size: 14px; color: #999">后端代理服务</a> <a href="/tags/图片处理/" style="font-size: 18.17px; color: #7d7d7d">图片处理</a> <a href="/tags/基础知识/" style="font-size: 24px; color: #555">基础知识</a> <a href="/tags/少儿编程/" style="font-size: 14px; color: #999">少儿编程</a> <a href="/tags/工具库/" style="font-size: 23.17px; color: #5b5b5b">工具库</a> <a href="/tags/微信/" style="font-size: 14.83px; color: #939393">微信</a> <a href="/tags/手写/" style="font-size: 19.83px; color: #717171">手写</a> <a href="/tags/打印/" style="font-size: 14px; color: #999">打印</a> <a href="/tags/文章收集/" style="font-size: 14px; color: #999">文章收集</a> <a href="/tags/日语/" style="font-size: 18.17px; color: #7d7d7d">日语</a> <a href="/tags/样式/" style="font-size: 18.17px; color: #7d7d7d">样式</a> <a href="/tags/正则/" style="font-size: 14px; color: #999">正则</a> <a href="/tags/浏览器/" style="font-size: 16.5px; color: #888">浏览器</a> <a href="/tags/爬虫/" style="font-size: 14px; color: #999">爬虫</a> <a href="/tags/移动端/" style="font-size: 21.5px; color: #666">移动端</a> <a href="/tags/算法/" style="font-size: 15.67px; color: #8e8e8e">算法</a> <a href="/tags/编译/" style="font-size: 17.33px; color: #828282">编译</a> <a href="/tags/网络基础/" style="font-size: 20.67px; color: #6c6c6c">网络基础</a> <a href="/tags/调试/" style="font-size: 14.83px; color: #939393">调试</a> <a href="/tags/资源导航/" style="font-size: 14.83px; color: #939393">资源导航</a> <a href="/tags/软考/" style="font-size: 14px; color: #999">软考</a> <a href="/tags/面试题/" style="font-size: 22.33px; color: #606060">面试题</a> <a href="/tags/面试题系列/" style="font-size: 18.17px; color: #7d7d7d">面试题系列</a>
    </div>
</div>




      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">
    <div class="social-wrapper">
      
    </div>
    <br>
    <div>博客内容遵循 <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="licenses">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></div>
    <div>本站使用 <a href="https://github.com/xaoxuu/hexo-theme-material-x" target="_blank" class="codename">Material-X</a> 作为主题，
		总访问量为 <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span> 次。
    </div>

</footer>

  <script>setLoadingBarProgress(80);</script>
  <!-- <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script src="/js/jquery.min.js"></script>
<!-- <script src='//cdn.bootcss.com/node-waves/0.7.5/waves.min.js'></script> -->
<script src="/js/waves.min.js"></script>
<!-- <script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script> -->
<script src="/js/scrollreveal.min.js"></script>
<!-- 访问统计 -->
<!-- <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- 推荐文章 -->
<!-- <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script> -->
<!-- <script src="//unpkg.com/valine/dist/Valine.min.js"></script> -->
<script src="/js/jquery.fitvids.js"></script>
<script>
var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
var ALGOLIA_API_KEY = "";
var ALGOLIA_APP_ID = "";
var ALGOLIA_INDEX_NAME = "";
var AZURE_SERVICE_NAME = "";
var AZURE_INDEX_NAME = "";
var AZURE_QUERY_KEY = "";
var BAIDU_API_ID = "";
var SEARCH_SERVICE = "hexo";
var ROOT = "/"||"/";
if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


    
    
    


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
